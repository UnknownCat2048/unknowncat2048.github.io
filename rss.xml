<?xml version="1.0" encoding="UTF-8"?><rss version="2.0" xmlns:content="http://purl.org/rss/1.0/modules/content/"><channel><title>夜深人静NEON小窝</title><description>像猫一样</description><link>https://blog.unknowncat2048.top/</link><language>zh_CN</language><item><title>使用 SSH 协议连接到 Gitea LFS 服务</title><link>https://blog.unknowncat2048.top/posts/dev-tool/gitea-git-lfs-ssh/</link><guid isPermaLink="true">https://blog.unknowncat2048.top/posts/dev-tool/gitea-git-lfs-ssh/</guid><description>通过配置使 Gitea 的 LFS 支持 SSH 协议，使用 SSH 协议而非 http/https 协议更方便安全的连接</description><pubDate>Thu, 29 Jan 2026 00:00:00 GMT</pubDate><content:encoded>&lt;h2&gt;Gitea LFS 开启 SSH&lt;/h2&gt;
&lt;p&gt;Gitea 默认禁用 Git LFS Pure SSH 协议支持，需要在配置文件 &lt;code&gt;app.ini&lt;/code&gt; 中启用：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[server]
LFS_ALLOW_PURE_SSH = true
&lt;/code&gt;&lt;/pre&gt;
&lt;h2&gt;使用 SSH 连接 LFS&lt;/h2&gt;
&lt;p&gt;本地仓库指定 &lt;code&gt;lfs.url&lt;/code&gt; 为 ssh 链接&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;git config lfs.url git@example.com/user/repo.git
&lt;/code&gt;&lt;/pre&gt;
&lt;blockquote&gt;
&lt;p&gt;[!NOTE]&lt;/p&gt;
&lt;p&gt;后来测试发现如果只有一个远程仓库，并且用的是 SSH 协议连接，就不需要设置。&lt;/p&gt;
&lt;p&gt;设置了多个远程仓库（如一个 GitHub 一个 Gitea），需要指定使用其中一个 LFS 服务器时须设置对应的链接，否则会在推送到远程仓库时使用对应的仓库的 LFS 服务。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;hr /&gt;
&lt;h2&gt;吐槽&lt;/h2&gt;
&lt;p&gt;就这么简单的东西，折磨了我整整两天。&lt;/p&gt;
&lt;p&gt;一开始只是想用 Gitea 的 LFS，结果 &lt;code&gt;pre-push.hook&lt;/code&gt;  一直失败，查看日志发现连接不上，提示连接被服务器关闭。但是不用 LFS，只用 Git 又是正常的。&lt;/p&gt;
&lt;p&gt;之前在本地部署过 Gitea，也在云服务器部署过 Gitea，都是可以正常使用 Git 以及 LFS 的。不同的就是这次使用 Docker 部署了 Gitea 以及 nginx，用 nginx 反代 Gitea，同时还买了个域名用上了。&lt;/p&gt;
&lt;p&gt;问了 AI，AI 将目标放在了 nginx 的配置上，于是各种修改配置并测试，整整一个下午也没解决。随后 AI 提出使用 curl 模拟连接，通过在本地和服务器分别模拟，发现本地无法连接而服务器可以。接着查看 nginx 日志，发现本地的连接没有任何记录。于是 AI 又将目标放在网卡设置上，又是一通排查修改测试，仍然不行，到这时候已经凌晨两点了。在睡前最后使用 curl 通过服务器 ip 而非域名连接，结果 ip 可以连接。最终确定了原因，大概是域名没备案，LFS 的连接被识别到特征，云服务商直接将连接掐断了。&lt;/p&gt;
&lt;p&gt;第二天想到能否让 LFS 走 SSH 协议绕过云服务商的检测。还是先问 AI，得到答案说 Gitea 是支持 LFS 使用 SSH 协议的，需要设置 &lt;code&gt;LFS_ALLOW_PURE_SSH = true&lt;/code&gt;。在 Gitea 的文档中没有看到这个配置，但还是抱着试一试的心态测试了一下，发现本地推送一直走 https，还是无法成功推送。本着对 AI 的不完全信任，以及没有在官方文档中看到这个配置，判断 AI 编了一个配置，于是放弃。&lt;/p&gt;
&lt;p&gt;之后尝试将域名托管到 cloudflare，又是开启 DNS 代理，又是使用回源。最后自然也是没有成功，并且意识到拦截不在域名的阶段，而是在服务器机房网络。&lt;/p&gt;
&lt;p&gt;最后考虑到使用“https + 服务器 ip + 忽略 ssl 认证”的方法既不优雅又不安全，还是想试一试 SSH。通过查看 Gitea 仓库的 issue ，确认 LFS 已经实现 SSH 协议连接。突然反应过来并且查看了英文文档，发现英文文档确实是有这个配置的。至此又回到了本地仓库的设置，因为被 AI 带到了坑里，一直通过查看 &lt;code&gt;git lfs env&lt;/code&gt; 中的 &lt;code&gt;endpoint&lt;/code&gt; 是 https 还是 ssh 来判断使用什么协议，又花了很长时间琢磨怎么改，试了各种方法还是没有改成功（不知道原因）。&lt;/p&gt;
&lt;p&gt;最后设置了 lfs.url 后试着推了一下直接就推上去了……&lt;/p&gt;
&lt;p&gt;又到了凌晨，总而言之，能用了。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://s2.loli.net/2026/01/31/nYOhQ6iBH8p9NIL.png&quot; alt=&quot;Suan-Le-Ba&quot; /&gt;&lt;/p&gt;
&lt;p&gt;更新于 2026 年 1 月 31 日：&lt;/p&gt;
&lt;p&gt;还是不死心，又试了试把 &lt;code&gt;lfs.url&lt;/code&gt; 删掉后推送，居然又能推了。新建了一个仓库测试，竟然也可以。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://s2.loli.net/2026/02/01/tVDbfZqrIU6TAYc.jpg&quot; alt=&quot;Ying-Li-Guo-Zai&quot; /&gt;&lt;/p&gt;
</content:encoded></item><item><title>解决 VS Code 插件 Remote-SSH 导致的服务器崩溃</title><link>https://blog.unknowncat2048.top/posts/devops/vscode-remote-ssh-server-crash/</link><guid isPermaLink="true">https://blog.unknowncat2048.top/posts/devops/vscode-remote-ssh-server-crash/</guid><description>使用 VS Code 安装 Remote-SSH 插件连接远程服务器，如果未经过设置可能导致服务器崩溃。</description><pubDate>Wed, 21 Jan 2026 00:00:00 GMT</pubDate><content:encoded>&lt;h2&gt;背景&lt;/h2&gt;
&lt;p&gt;远程服务器为阿里云轻量应用服务器 2核2G，系统为 Debian 12.10。&lt;/p&gt;
&lt;p&gt;使用 VS Code 安装 Remote-SSH 插件来远程连接服务器：&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://s2.loli.net/2026/01/21/NLtCmzITG96oPHJ.png&quot; alt=&quot;VSCode-Remote-SSH&quot; /&gt;&lt;/p&gt;
&lt;p&gt;工作区为云服务器根目录：&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://s2.loli.net/2026/01/21/tPwJ6IGYKR8eONa.png&quot; alt=&quot;Server-Root-Folder&quot; /&gt;&lt;/p&gt;
&lt;h2&gt;现象&lt;/h2&gt;
&lt;p&gt;第一次服务器崩溃出现在使用 &lt;code&gt;clear&lt;/code&gt; 指令清空终端时，指令发出后与服务器的连接中断，无法重新连接。通过阿里云服务器管理界面 &lt;code&gt;远程连接&lt;/code&gt; 功能同样无法建立连接。通过系统监控观察到&lt;strong&gt;大量 IO 占用&lt;/strong&gt;（图为第二次崩溃）：&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://s2.loli.net/2026/01/21/S1FZopa7yPfRqQw.png&quot; alt=&quot;Server-IO&quot; /&gt;&lt;/p&gt;
&lt;p&gt;重启服务器后恢复正常。&lt;/p&gt;
&lt;p&gt;第二次服务器崩溃出现子使用指令 &lt;code&gt;cd /&lt;/code&gt; 时，现象与第一次完全相同。在等待一小时后服务器仍无法恢复正常，只能重启。&lt;/p&gt;
&lt;h2&gt;原因&lt;/h2&gt;
&lt;p&gt;经过查询，原因为 VS Code 对工作区的所有文件建立索引，当工作区文件过多时就会导致服务器崩溃。&lt;/p&gt;
&lt;h2&gt;解决&lt;/h2&gt;
&lt;p&gt;在设置中关闭 &lt;code&gt;search:Follow Symlinks&lt;/code&gt; 选项。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://s2.loli.net/2026/01/21/ENRdLgCWw7Y6MtS.png&quot; alt=&quot;Setting-Follow-Symlinks&quot; /&gt;&lt;/p&gt;
</content:encoded></item><item><title>记录一下折腾服务器</title><link>https://blog.unknowncat2048.top/posts/devops/cuustom-server-record/</link><guid isPermaLink="true">https://blog.unknowncat2048.top/posts/devops/cuustom-server-record/</guid><description>从头开始配置一台服务器：配置 swap、修改 SSH 端口、安装 Docker、部署 nginx、使用 lego 申请证书、nginx 反代 Gitea 并开启 https 、部署 Gitea、fail2ban 封禁、logrotate 分割 nginx 日志。</description><pubDate>Wed, 14 Jan 2026 00:00:00 GMT</pubDate><content:encoded>&lt;blockquote&gt;
&lt;p&gt;[!NOTE]&lt;/p&gt;
&lt;p&gt;操作系统是阿里云轻型服务器提供的 &lt;code&gt;Debian 12.10&lt;/code&gt;，部分内容可能与官方镜像不同。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2&gt;更新软件包&lt;/h2&gt;
&lt;pre&gt;&lt;code&gt;sudo apt update
sudo apt upgrade
&lt;/code&gt;&lt;/pre&gt;
&lt;h2&gt;修改 hostname&lt;/h2&gt;
&lt;p&gt;查看&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;hostname
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;修改&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;hostnamectl set-hostname newhostname
&lt;/code&gt;&lt;/pre&gt;
&lt;h2&gt;设置 swap&lt;/h2&gt;
&lt;h3&gt;创建 swap&lt;/h3&gt;
&lt;p&gt;查看&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;free -h
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;创建 swap 文件&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;sudo fallocate -l 4G /swapfile
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;a href=&quot;https://docs.redhat.com/zh-cn/documentation/red_hat_enterprise_linux/9/html/managing_storage_devices/recommended-system-swap-space_getting-started-with-swap&quot;&gt;swap 大小参考&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;设置权限&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;sudo chmod 600 /swapfile
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;格式化为 swap&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;sudo mkswap /swapfile
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;启用 swap&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;sudo swapon /swapfile
&lt;/code&gt;&lt;/pre&gt;
&lt;h3&gt;开机启动&lt;/h3&gt;
&lt;p&gt;编辑 &lt;code&gt;/etc/fstab&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;sudo nano /etc/fstab
&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;...
/swapfile none swap sw 0 0
&lt;/code&gt;&lt;/pre&gt;
&lt;h3&gt;调整 swappiness&lt;/h3&gt;
&lt;p&gt;查看当前值&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;cat /proc/sys/vm/swappiness
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;编辑 &lt;code&gt;/etc/sysctl.conf&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;sudo nano /etc/sysctl.conf
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;添加或修改 &lt;code&gt;swappiness&lt;/code&gt; 值（10 - 20）&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;...
vm.swappiness = 10
...
&lt;/code&gt;&lt;/pre&gt;
&lt;h2&gt;修改 SSH 端口&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;[!CAUTION]&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;在确认新端口能连上之前，不要关闭当前 SSH 会话&lt;/strong&gt;。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;查看&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;sudo ss -tlnp | grep ssh
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;编辑 &lt;code&gt;/etc/ssh/sshd_config&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;sudo nano /etc/ssh/sshd_config
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;先新增端口，确认没问题后再删除 22 端口&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;...
Port 22
Port 2222
...
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;检查配置是否有误（没有输出就是正常）&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;sudo sshd -t
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;重载 SSH 服务&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;sudo systemctl reload ssh
&lt;/code&gt;&lt;/pre&gt;
&lt;blockquote&gt;
&lt;p&gt;[!WARNING]&lt;/p&gt;
&lt;p&gt;不要使用 &lt;code&gt;restart&lt;/code&gt; 防止自己掉线。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;测试自己能否成功连接，确认没有问题后就可以把 22 端口的配置注释或者直接删掉。&lt;/p&gt;
&lt;h2&gt;安装 Docker&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;https://docs.docker.com/engine/install/debian/#install-using-the-repository&quot;&gt;Docker 官方安装教程&lt;/a&gt;&lt;/p&gt;
&lt;h3&gt;普通用户加入 docker 组&lt;/h3&gt;
&lt;pre&gt;&lt;code&gt;sudo usermod -aG docker youruser
&lt;/code&gt;&lt;/pre&gt;
&lt;blockquote&gt;
&lt;p&gt;[!IMPORTANT]&lt;/p&gt;
&lt;p&gt;加入用户组后需要重启会话才可生效。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3&gt;配置镜像加速源&lt;/h3&gt;
&lt;p&gt;可以在这个&lt;a href=&quot;https://status.1panel.top/status/docker&quot;&gt;网站&lt;/a&gt;查看镜像加速源。&lt;/p&gt;
&lt;p&gt;修改 &lt;code&gt;/etc/docker/daemon.json&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;sudo nano /etc/docker/daemon.json
&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;{
    &quot;registry-mirrors&quot;: [
        &quot;https://docker.1ms.run&quot;,
        &quot;https://docker.1panel.live&quot;
    ],
    &quot;log-driver&quot;: &quot;json-file&quot;,
    &quot;log-opts&quot;: {
        &quot;max-size&quot;: &quot;20m&quot;,
        &quot;max-file&quot;: &quot;3&quot;
    }
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;重启 Docker&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;sudo systemctl daemon-reexec
sudo systemctl restart docker
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;测试&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;docker run --rm hello-world
&lt;/code&gt;&lt;/pre&gt;
&lt;h2&gt;部署 nginx&lt;/h2&gt;
&lt;p&gt;创建目录&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;sudo mkdir -p /srv/stack/nginx/{conf.d,log,html}
sudo chown -R admin:admin /srv/stack
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;创建 &lt;code&gt;/srv/stack/docker-compose.yml&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;nano /srv/stack/docker-compose.yml
&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;services:
  nginx:
    image: nginx:1.28-alpine
    container_name: nginx
    ports:
      - &quot;80:80&quot;
    environment:
      - TZ=Asia/Shanghai
    volumes:
      - /srv/stack/nginx/conf.d:/etc/nginx/conf.d:ro
      - /srv/stack/nginx/log:/var/log/nginx
      # - /srv/stack/nginx/html:/usr/share/nginx/html
    restart: unless-stopped
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;创建 nginx 配置&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;nano /srv/stack/nginx/conf.d/default.conf
&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;server {
    listen       80;
    server_name  _;

    #access_log  /var/log/nginx/host.access.log  main;

    location / {
        root   /usr/share/nginx/html;
        index  index.html index.htm;
    }

    #error_page  404              /404.html;

    # redirect server error pages to the static page /50x.html
    #
    error_page   500 502 503 504  /50x.html;
    location = /50x.html {
        root   /usr/share/nginx/html;
    }
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;启动&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;docker compose up -d
&lt;/code&gt;&lt;/pre&gt;
&lt;h2&gt;使用 lego 申请证书&lt;/h2&gt;
&lt;p&gt;新建 &lt;code&gt;/srv/stack/lego/docker-compose.yml&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;nano /srv/stack/lego/docker-compose.yml
&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;services:
  lego:
    image: goacme/lego
    container_name: lego
    env_file:
      - ./config/.env
    environment:
      - LEGO_PATH=/data
    volumes:
      - /srv/stack/lego:/data
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;编写 &lt;code&gt;/srv/stack/lego/config/.env&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;nano /srv/stack/lego/config/.env
&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;ALICLOUD_ACCESS_KEY=YOUR_ACCESS_KEY_ID
ALICLOUD_SECRET_KEY=YOUR_ACCESS_KEY_SECRET

LEGO_EMAIL=YOUR_EMAIL
&lt;/code&gt;&lt;/pre&gt;
&lt;h3&gt;首次申请&lt;/h3&gt;
&lt;pre&gt;&lt;code&gt;docker compose -f /srv/stack/lego/docker-compose.yml run --rm lego --dns alidns -a -d example.com -d *.example.com run
&lt;/code&gt;&lt;/pre&gt;
&lt;h3&gt;设置定时任务&lt;/h3&gt;
&lt;pre&gt;&lt;code&gt;crontab -e
&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;...
0 3 * * * cd /srv/stack &amp;amp;&amp;amp; docker compose -f ./lego/docker-compose.yml run --rm lego --dns alidns -d example.com -d *.example.com renew &amp;amp;&amp;amp; docker compose exec nginx nginx -s reload
&lt;/code&gt;&lt;/pre&gt;
&lt;h2&gt;nginx 开启 HTTPS&lt;/h2&gt;
&lt;p&gt;生成默认证书&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;openssl req -x509 -nodes -days 3650   -newkey rsa:2048   -keyout /srv/stack/nginx/cert/default.key   -out /srv/stack/nginx/cert/default.crt   -subj &quot;/CN=localhost&quot;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;修改 &lt;code&gt;/srv/stack/docker-compose.yml&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;services:
  nginx:
    image: nginx:1.28-alpine
    container_name: nginx
    ports:
      - &quot;80:80&quot;
      - &quot;443:443&quot;
    environment:
      - TZ=Asia/Shanghai
    volumes:
      - /srv/stack/nginx/conf.d:/etc/nginx/conf.d:ro
      - /srv/stack/lego/certificates:/ssl/example.com:ro
      - /srv/stack/nginx/cert:/ssl/nginx/:ro
      - /srv/stack/nginx/log:/var/log/nginx
      # - /srv/stack/nginx/html:/usr/share/nginx/html
    restart: unless-stopped
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;修改 &lt;code&gt;/srv/stack/nginx/conf.d/default.conf&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;server {
    listen 80 default_server;
    server_name  _;

    return 444;
}

server {
    listen 443 ssl default_server;
    server_name  _;

    ssl_certificate /ssl/nginx/default.crt;
    ssl_certificate_key /ssl/nginx/default.key;

    return 444;
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;创建 &lt;code&gt;/srv/stack/nginx/conf.d/gitea.conf&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;nano /srv/stack/nginx/conf.d/gitea.conf
&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;server {
    listen 80;
    server_name git.example.com;
    return 301 https://$host$request_uri;
}

server {
    listen 443 ssl;
    server_name git.example.com;
    
    http2 on;

    ssl_certificate /ssl/example.com/example.com.crt;
    ssl_certificate_key /ssl/example.com/example.com.key;

    ssl_protocols TLSv1.2 TLSv1.3;
    ssl_prefer_server_ciphers off;

    ssl_session_cache shared:SSL:10m;
    ssl_session_timeout 10m;

    location / {
        client_max_body_size 512M;
        proxy_set_header Connection $http_connection;
        proxy_set_header Upgrade $http_upgrade;
        proxy_pass http://gitea:3000;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto https;
    }
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;重新构建 nginx 容器&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;docker compose -f /srv/stack/docker-compose.yml up -d --build nginx
&lt;/code&gt;&lt;/pre&gt;
&lt;h2&gt;部署 Gitea Rootless&lt;/h2&gt;
&lt;p&gt;创建目录&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;mkdir -p /srv/stack/gitea/{config,data}
chown 1000:1000 -R /srv/stack/gitea
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;编辑 &lt;code&gt;/srv/stack/docker-compose.yml&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;services:
  nginx:
    image: nginx:1.28-alpine
    container_name: nginx
    ports:
      - &quot;80:80&quot;
      - &quot;443:443&quot;
    environment:
      - TZ=Asia/Shanghai
    volumes:
      - /srv/stack/nginx/conf.d:/etc/nginx/conf.d:ro
      - /srv/stack/lego/certificates:/ssl/unknowncat2048.top:ro
      - /srv/stack/nginx/cert:/ssl/nginx/:ro
      - /srv/stack/nginx/log:/var/log/nginx
      # - /srv/stack/nginx/html:/usr/share/nginx/html
    restart: unless-stopped
    depends_on:
      - gitea
  
  gitea:
    image: gitea/gitea:1.25-rootless
    container_name: gitea
    ports:
      - &quot;1234:2222&quot;
    volumes:
      - /srv/stack/gitea/data:/var/lib/gitea
      - /srv/stack/gitea/config:/etc/gitea
      - /etc/timezone:/etc/timezone:ro
      - /etc/localtime:/etc/localtime:ro
    restart: unless-stopped
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;启动容器&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;docker compose -f /srv/stack/docker-compose.yml up -d
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;访问 &lt;code&gt;https://git.example.com&lt;/code&gt; 进入 &lt;code&gt;Gitea&lt;/code&gt; 安装页面。&lt;/p&gt;
&lt;h2&gt;安装 fail2ban&lt;/h2&gt;
&lt;p&gt;安装&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;sudo apt update
sudo apt install -y fail2ban
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;启动&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;sudo systemctl enable --now fail2ban
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;查看&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;sudo fail2ban-client status
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;查看具体规则&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;sudo fail2ban-client status xxx
&lt;/code&gt;&lt;/pre&gt;
&lt;h3&gt;防止 SSH 爆破&lt;/h3&gt;
&lt;p&gt;创建 &lt;code&gt;/etc/fail2ban/jail.d/sshd.conf&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;sudo nano /etc/fail2ban/jail.d/sshd.conf
&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;[sshd]
enabled  = true
port     = ssh
logpath  = %(sshd_log)s
backend  = systemd

maxretry = 5
findtime = 10m
bantime  = 1h
&lt;/code&gt;&lt;/pre&gt;
&lt;h3&gt;根据 nginx 日志屏蔽&lt;/h3&gt;
&lt;p&gt;检查自带 filter&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;ls /etc/fail2ban/filter.d/nginx*
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;创建  nginx jail&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;sudo nano /etc/fail2ban/jail.d/nginx.conf
&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;[nginx-http-auth]
enabled  = true
port     = http,https
logpath  = /srv/stack/nginx/log/error.log
backend  = auto

maxretry = 5
findtime = 10m
bantime  = 1h


[nginx-botsearch]
enabled  = true
port     = http,https
logpath  = /srv/stack/nginx/log/access.log
backend  = auto

maxretry = 2
findtime = 10m
bantime  = 12h
&lt;/code&gt;&lt;/pre&gt;
&lt;h3&gt;根据 Gitea 日志屏蔽&lt;/h3&gt;
&lt;p&gt;&lt;a href=&quot;https://docs.gitea.com/zh-cn/administration/fail2ban-setup&quot;&gt;Gitea 官方教程&lt;/a&gt;&lt;/p&gt;
&lt;h3&gt;重启 fail2ban&lt;/h3&gt;
&lt;pre&gt;&lt;code&gt;sudo systemctl restart fail2ban
&lt;/code&gt;&lt;/pre&gt;
&lt;h2&gt;分割 nginx 日志&lt;/h2&gt;
&lt;p&gt;使用系统自带的 &lt;code&gt;logrotate&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;sudo nano /etc/logrotate.d/nginx-docker
&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;/srv/stack/nginx/log/*.log {
    daily
    rotate 14
    size 100M
    missingok
    notifempty
    compress
    delaycompress
    sharedscripts
    copytruncate
}
&lt;/code&gt;&lt;/pre&gt;
</content:encoded></item><item><title>在 VSCode 中使用 C# 刷 LeetCode</title><link>https://blog.unknowncat2048.top/posts/dev-tool/vscode-leetcode-csharp/</link><guid isPermaLink="true">https://blog.unknowncat2048.top/posts/dev-tool/vscode-leetcode-csharp/</guid><description>配置 C# 本地刷题与调试，使用代码片段快捷补全代码</description><pubDate>Sun, 11 Jan 2026 00:00:00 GMT</pubDate><content:encoded>&lt;h2&gt;LeetCode 插件配置&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;选择默认语言：设置 &amp;gt; 扩展 &amp;gt; LeetCode &amp;gt; Default Language 选择 &lt;code&gt;csharp&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;重点&lt;/strong&gt;：打开 &lt;code&gt;settings.json&lt;/code&gt; 添加配置&lt;/li&gt;
&lt;/ul&gt;
&lt;pre&gt;&lt;code&gt;&quot;leetcode.filePath&quot;: {
    &quot;default&quot;: {
        &quot;folder&quot;: &quot;src/${id}-${PascalCaseName}&quot;,
        &quot;filename&quot;: &quot;Solution-.${ext}&quot;
    }
},
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;配置完成后，点击题目介绍页面的 &lt;code&gt;Code Now&lt;/code&gt; 就会按设置生成脚本。更方便的尝试与管理多种解题思路。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://s2.loli.net/2026/01/11/ulg5WcIzFJVZ6TA.png&quot; alt=&quot;LeetCode-File-List&quot; /&gt;&lt;/p&gt;
&lt;h2&gt;调试与构建配置&lt;/h2&gt;
&lt;p&gt;项目根目录新建 &lt;code&gt;LeetCode.csproj&lt;/code&gt; ：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;&amp;lt;!-- LeetCode.csproj --&amp;gt;
&amp;lt;Project Sdk=&quot;Microsoft.NET.Sdk&quot;&amp;gt;
    &amp;lt;PropertyGroup&amp;gt;
        &amp;lt;OutputType&amp;gt;Exe&amp;lt;/OutputType&amp;gt;
        &amp;lt;TargetFramework&amp;gt;net8.0&amp;lt;/TargetFramework&amp;gt;
        &amp;lt;ImplicitUsings&amp;gt;enable&amp;lt;/ImplicitUsings&amp;gt;
        &amp;lt;Nullable&amp;gt;enable&amp;lt;/Nullable&amp;gt;
    &amp;lt;/PropertyGroup&amp;gt;
&amp;lt;/Project&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;新建 &lt;code&gt;.vscode/launch.json&lt;/code&gt; ：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;{
    &quot;version&quot;: &quot;0.2.0&quot;,
    &quot;configurations&quot;: [
        {
            &quot;name&quot;: &quot;.NET Core Launch (console)&quot;,
            &quot;type&quot;: &quot;coreclr&quot;,
            &quot;request&quot;: &quot;launch&quot;,
            &quot;preLaunchTask&quot;: &quot;build&quot;,
            &quot;program&quot;: &quot;${workspaceFolder}/bin/Debug/net8.0/LeetCode.dll&quot;,
            &quot;args&quot;: [],
            &quot;cwd&quot;: &quot;${workspaceFolder}&quot;,
            &quot;console&quot;: &quot;internalConsole&quot;,
            &quot;stopAtEntry&quot;: false,
            &quot;logging&quot;: {
                &quot;moduleLoad&quot;: false
            }
        },
        {
            &quot;name&quot;: &quot;.NET Core Attach&quot;,
            &quot;type&quot;: &quot;coreclr&quot;,
            &quot;request&quot;: &quot;attach&quot;
        }
    ]
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;新建 &lt;code&gt;.vscode/tasks.json&lt;/code&gt; ：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;{
    &quot;version&quot;: &quot;2.0.0&quot;,
    &quot;tasks&quot;: [
        {
            &quot;label&quot;: &quot;build&quot;,
            &quot;command&quot;: &quot;dotnet&quot;,
            &quot;type&quot;: &quot;process&quot;,
            &quot;args&quot;: [
                &quot;build&quot;,
                &quot;${workspaceFolder}/LeetCode.csproj&quot;,
                &quot;-p:StartupObject=LeetCode.P${input:problem}.S${input:solution}.Program&quot;,
                &quot;/property:GenerateFullPaths=true&quot;,
                &quot;/consoleloggerparameters:NoSummary;ForceNoAlign&quot;
            ],
            &quot;problemMatcher&quot;: &quot;$msCompile&quot;
        }
    ],
    &quot;inputs&quot;: [
        {
            &quot;id&quot;: &quot;problem&quot;,
            &quot;description&quot;: &quot;Please enter the problem ID.&quot;,
            &quot;default&quot;: &quot;&quot;,
            &quot;type&quot;: &quot;promptString&quot;
        },
        {
            &quot;id&quot;: &quot;solution&quot;,
            &quot;description&quot;: &quot;Please enter the solution number.&quot;,
            &quot;default&quot;: &quot;1&quot;,
            &quot;type&quot;: &quot;promptString&quot;
        }
    ]
}
&lt;/code&gt;&lt;/pre&gt;
&lt;h2&gt;调试前的脚本准备&lt;/h2&gt;
&lt;h3&gt;命名空间&lt;/h3&gt;
&lt;p&gt;为需要本地测试的解题脚本分配一个唯一的命名空间。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://s2.loli.net/2026/01/11/SYObtl8rB4A7nGZ.png&quot; alt=&quot;Solution-Namespace&quot; /&gt;&lt;/p&gt;
&lt;h3&gt;程序入口&lt;/h3&gt;
&lt;p&gt;一个题解对应一个程序入口。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://s2.loli.net/2026/01/11/nTYOjNrzHBFx1qS.png&quot; alt=&quot;Solution-Main&quot; /&gt;&lt;/p&gt;
&lt;h2&gt;调试&lt;/h2&gt;
&lt;p&gt;按下 &amp;lt;kbd&amp;gt;F5&amp;lt;/kbd&amp;gt; 开始调试，顶部会弹出提示框，填入要调试的题号与题解号。结果输出在底部的调试控制台。&lt;/p&gt;
&lt;h2&gt;使用代码片段快捷补全&lt;/h2&gt;
&lt;p&gt;新建 &lt;code&gt;.vscode/csharp.code-snippets&lt;/code&gt; 复制粘贴下面内容：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;{
    &quot;SolutionNamespace&quot;: {
      &quot;scope&quot;: &quot;csharp&quot;,
      &quot;prefix&quot;: &quot;ns&quot;,
      &quot;body&quot;: [
        &quot;namespace LeetCode.P$1.S$2;&quot;
      ],
      &quot;description&quot;: &quot;Solution Namespace&quot;
    },
    &quot;TestProgram&quot;: {
      &quot;scope&quot;: &quot;csharp&quot;,
      &quot;prefix&quot;: &quot;tp&quot;,
      &quot;body&quot;: [
        &quot;public static class Program&quot;,
        &quot;{&quot;,
        &quot;    public static void Main()&quot;,
        &quot;    {&quot;,
        &quot;        var solution = new Solution();&quot;,
        &quot;        &quot;,
        &quot;        solution$1&quot;,
        &quot;    }&quot;,
        &quot;}&quot;
      ],
      &quot;description&quot;: &quot;Test Program&quot;
    },
    &quot;DisableWarning&quot;: {
      &quot;scope&quot;: &quot;csharp&quot;,
      &quot;prefix&quot;: &quot;dw&quot;,
      &quot;body&quot;: [
        &quot;#pragma warning disable&quot;
      ],
      &quot;description&quot;: &quot;Disable Warning&quot;
    }
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;之后输入对应的代码再补全即可快捷填充代码片段。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;ns&lt;/code&gt; 可以补全命名空间&lt;/li&gt;
&lt;li&gt;&lt;code&gt;tp&lt;/code&gt; 可以补全程序入口&lt;/li&gt;
&lt;li&gt;&lt;code&gt;dw&lt;/code&gt; 的补全可以忽略当前文件的内的 &lt;code&gt;Warring&lt;/code&gt; 提示&lt;/li&gt;
&lt;/ul&gt;
</content:encoded></item><item><title>解决 VSCode 无法登录微软账户的问题</title><link>https://blog.unknowncat2048.top/posts/dev-tool/vscode-can-not-login-microsoft/</link><guid isPermaLink="true">https://blog.unknowncat2048.top/posts/dev-tool/vscode-can-not-login-microsoft/</guid><description>解决开启代理导致的 VSCode 无法登录微软账户的问题</description><pubDate>Tue, 02 Dec 2025 00:00:00 GMT</pubDate><content:encoded>&lt;h2&gt;背景&lt;/h2&gt;
&lt;p&gt;为了方便一直挂着代理，使用系统代理模式。&lt;/p&gt;
&lt;h2&gt;现象&lt;/h2&gt;
&lt;p&gt;在使用 VSCode 的时候一直无法登录微软账户，打开登录界时提示 “我们无法连接你”，状态码 404。&lt;/p&gt;
&lt;p&gt;借用一下微软问题中心的图片：&lt;/p&gt;
&lt;p&gt;&amp;lt;img src=&quot;https://learn-attachment.microsoft.com/api/attachments/8230d08d-e2d8-4da9-8dc6-82277a5b7d97?platform=QnA&quot; alt=&quot;img&quot;  /&amp;gt;&lt;/p&gt;
&lt;h2&gt;原因&lt;/h2&gt;
&lt;p&gt;VSCode 登录调用的是系统中的 “工作或学校账户” 的UWP应用，默认无法使用本地回环地址的代理。&lt;/p&gt;
&lt;h2&gt;解决&lt;/h2&gt;
&lt;p&gt;使用 &lt;code&gt;EnableLoopback&lt;/code&gt; 工具，在其中找到 “工作或学校账户” 并勾选，随后保存。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://s2.loli.net/2025/12/13/lBmKGEJk2F3cDVg.png&quot; alt=&quot;EnableLoopback&quot; /&gt;&lt;/p&gt;
&lt;p&gt;一般现代主流代理客户端都内置该工具，以我使用的 Clash Verge Rev 为例，在”设置-UWP 工具”可以开启。&lt;/p&gt;
</content:encoded></item><item><title>Clash Verge Rev 合并订阅源</title><link>https://blog.unknowncat2048.top/posts/dev-tool/clash-verge-rev-merge-providers/</link><guid isPermaLink="true">https://blog.unknowncat2048.top/posts/dev-tool/clash-verge-rev-merge-providers/</guid><description>合并两个订阅源并实现优先使用其中的一个订阅源</description><pubDate>Thu, 20 Nov 2025 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;使用代理客户端 &lt;code&gt;Clash Verge Rev&lt;/code&gt; 将多个订阅源合并，最大化利用上所有订阅，并且可以免去来回切换订阅源的麻烦。&lt;/p&gt;
&lt;h2&gt;新建本地配置&lt;/h2&gt;
&lt;p&gt;点击客户端左侧的&lt;code&gt;订阅&lt;/code&gt; 选项，然后点击 &lt;code&gt;新建&lt;/code&gt;。在弹出的新建配置界面进行配置，类型选择 &lt;code&gt;Local&lt;/code&gt;，名称填写 &lt;code&gt;Merge&lt;/code&gt;，时间填写 &lt;code&gt;3600&lt;/code&gt;，不需要选择本地文件，点击保存。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://s2.loli.net/2025/12/16/ZRaQnWw5sUVfTiz.png&quot; alt=&quot;Clash-Verge-Rev-新建配置&quot; /&gt;&lt;/p&gt;
&lt;h2&gt;编辑本地配置&lt;/h2&gt;
&lt;p&gt;右键刚才创建的配置，选择&lt;code&gt;编辑文件&lt;/code&gt;，在打开的窗口中替换为以下内容，记得修改订阅源地址，以及你想使用的的顺序，完成以后保存。&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;mixed-port: 7890
ipv6: true
udp: true
allow-lan: false
bind-address: &apos;127.0.0.1&apos;
mode: rule
log-level: info
unified-delay: true
experimental:
    ignore-resolve-fail: false
cfw-latency-timeout: 5000
cfw-latency-url: &apos;http:/www.gstatic.com/generate_204&apos;
cfw-conn-break-strategy: true
dns:
    enable: true
    listen: &apos;127.0.0.1:1053&apos;
    ipv6: true
    default-nameserver: [114.114.114.114, 223.5.5.5, 119.29.29.29]
    enhanced-mode: fake-ip
    fake-ip-range: 28.0.0.1/8
    use-hosts: true
    fake-ip-filter: [&apos;*.lan&apos;, &apos;*.localdomain&apos;, &apos;*.example&apos;, &apos;*.invalid&apos;, &apos;*.localhost&apos;, &apos;*.test&apos;, &apos;*.local&apos;, &apos;*.home.arpa&apos;, &apos;time.*.com&apos;, &apos;time.*.gov&apos;, &apos;time.*.edu.cn&apos;, &apos;time.*.apple.com&apos;, &apos;time1.*.com&apos;, &apos;time2.*.com&apos;, &apos;time3.*.com&apos;, &apos;time4.*.com&apos;, &apos;time5.*.com&apos;, &apos;time6.*.com&apos;, &apos;time7.*.com&apos;, &apos;ntp.*.com&apos;, &apos;ntp1.*.com&apos;, &apos;ntp2.*.com&apos;, &apos;ntp3.*.com&apos;, &apos;ntp4.*.com&apos;, &apos;ntp5.*.com&apos;, &apos;ntp6.*.com&apos;, &apos;ntp7.*.com&apos;, &apos;*.time.edu.cn&apos;, &apos;*.ntp.org.cn&apos;, +.pool.ntp.org, time1.cloud.tencent.com, music.163.com, &apos;*.music.163.com&apos;, &apos;*.126.net&apos;, musicapi.taihe.com, music.taihe.com, songsearch.kugou.com, trackercdn.kugou.com, &apos;*.kuwo.cn&apos;, api-jooxtt.sanook.com, api.joox.com, joox.com, y.qq.com, &apos;*.y.qq.com&apos;, streamoc.music.tc.qq.com, mobileoc.music.tc.qq.com, isure.stream.qqmusic.qq.com, dl.stream.qqmusic.qq.com, aqqmusic.tc.qq.com, amobile.music.tc.qq.com, &apos;*.xiami.com&apos;, &apos;*.music.migu.cn&apos;, music.migu.cn, +.msftconnecttest.com, +.msftncsi.com, msftconnecttest.com, msftncsi.com, localhost.ptlogin2.qq.com, localhost.sec.qq.com, +.srv.nintendo.net, +.stun.playstation.net, &apos;xbox.*.microsoft.com&apos;, xnotify.xboxlive.com, +.ipv6.microsoft.com, +.battlenet.com.cn, +.wotgame.cn, +.wggames.cn, +.wowsgame.cn, +.wargaming.net, proxy.golang.org, &apos;stun.*.*&apos;, &apos;stun.*.*.*&apos;, &apos;+.stun.*.*&apos;, &apos;+.stun.*.*.*&apos;, &apos;+.stun.*.*.*.*&apos;, heartbeat.belkin.com, &apos;*.linksys.com&apos;, &apos;*.linksyssmartwifi.com&apos;, &apos;*.router.asus.com&apos;, mesu.apple.com, swscan.apple.com, swquery.apple.com, swdownload.apple.com, swcdn.apple.com, swdist.apple.com, lens.l.google.com, stun.l.google.com, &apos;*.square-enix.com&apos;, &apos;*.finalfantasyxiv.com&apos;, &apos;*.ffxiv.com&apos;, &apos;*.ff14.sdo.com&apos;, ff.dorado.sdo.com, &apos;*.mcdn.bilivideo.cn&apos;, +.media.dssott.com, +.pvp.net]
    nameserver: [&apos;tls://223.5.5.5:853&apos;, &apos;tls://223.6.6.6:853&apos;, &apos;https://doh.pub/dns-query&apos;, &apos;https://dns.alidns.com/dns-query&apos;]

proxy-providers:
  订阅1:
    type: http
    path: ./proxy_provider/订阅1.yaml
    url: &amp;lt;订阅1地址&amp;gt;
    interval: 86400
    override:
      additional-prefix: &quot;订阅1 | &quot;
  订阅2:
    type: http
    path: ./proxy_provider/订阅2.yaml
    url: &amp;lt;订阅2地址&amp;gt;
    interval: 21600
    override:
      additional-prefix: &quot;订阅2 | &quot;

proxy-groups:
  - name: &apos;自动选择&apos;
    type: &apos;fallback&apos;
    url: &apos;https://www.gstatic.com/generate_204&apos;
    interval: 300
    timeout: 5000
    max-failed-times: 3
    use:
      - &apos;订阅1&apos;
      - &apos;订阅2&apos;
    proxies:
      - &apos;优先最佳&apos;
  - name: &apos;优先最佳&apos;
    type: &apos;url-test&apos;
    url: &apos;https://www.gstatic.com/generate_204&apos;
    interval: 300
    timeout: 5000
    max-failed-times: 3
    use:
     - &apos;订阅1&apos;

rule-providers:
  reject:
    type: http
    behavior: domain
    url: &quot;https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/reject.txt&quot;
    path: ./ruleset/reject.yaml
    interval: 86400
  icloud:
    type: http
    behavior: domain
    url: &quot;https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/icloud.txt&quot;
    path: ./ruleset/icloud.yaml
    interval: 86400
  apple:
    type: http
    behavior: domain
    url: &quot;https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/apple.txt&quot;
    path: ./ruleset/apple.yaml
    interval: 86400
  google:
    type: http
    behavior: domain
    url: &quot;https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/google.txt&quot;
    path: ./ruleset/google.yaml
    interval: 86400
  proxy:
    type: http
    behavior: domain
    url: &quot;https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/proxy.txt&quot;
    path: ./ruleset/proxy.yaml
    interval: 86400
  direct:
    type: http
    behavior: domain
    url: &quot;https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/direct.txt&quot;
    path: ./ruleset/direct.yaml
    interval: 86400
  private:
    type: http
    behavior: domain
    url: &quot;https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/private.txt&quot;
    path: ./ruleset/private.yaml
    interval: 86400
  gfw:
    type: http
    behavior: domain
    url: &quot;https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/gfw.txt&quot;
    path: ./ruleset/gfw.yaml
    interval: 86400
  tld-not-cn:
    type: http
    behavior: domain
    url: &quot;https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/tld-not-cn.txt&quot;
    path: ./ruleset/tld-not-cn.yaml
    interval: 86400
  telegramcidr:
    type: http
    behavior: ipcidr
    url: &quot;https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/telegramcidr.txt&quot;
    path: ./ruleset/telegramcidr.yaml
    interval: 86400
  cncidr:
    type: http
    behavior: ipcidr
    url: &quot;https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/cncidr.txt&quot;
    path: ./ruleset/cncidr.yaml
    interval: 86400
  lancidr:
    type: http
    behavior: ipcidr
    url: &quot;https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/lancidr.txt&quot;
    path: ./ruleset/lancidr.yaml
    interval: 86400
  applications:
    type: http
    behavior: classical
    url: &quot;https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/applications.txt&quot;
    path: ./ruleset/applications.yaml
    interval: 86400
  adblock:
    type: http
    behavior: domain
    url: &quot;https://gcore.jsdelivr.net/gh/217heidai/adblockfilters@main/rules/adblockmihomo.yaml&quot;
    path: ./ruleset/adblock.yaml
    interval: 86400

rules:
  - RULE-SET,applications,DIRECT
  - DOMAIN,clash.razord.top,DIRECT
  - DOMAIN,yacd.haishan.me,DIRECT
  - RULE-SET,private,DIRECT
  - RULE-SET,reject,REJECT
  - RULE-SET,adblock,REJECT
  - RULE-SET,icloud,DIRECT
  - RULE-SET,apple,DIRECT
  - RULE-SET,google,自动选择
  - RULE-SET,proxy,自动选择
  - RULE-SET,direct,DIRECT
  - RULE-SET,lancidr,DIRECT
  - RULE-SET,cncidr,DIRECT
  - RULE-SET,telegramcidr,自动选择
  - GEOIP,LAN,DIRECT
  - GEOIP,CN,DIRECT
  - MATCH,自动选择
&lt;/code&gt;&lt;/pre&gt;
&lt;h2&gt;代理节点&lt;/h2&gt;
&lt;p&gt;点击客户端左侧的&lt;code&gt;代理&lt;/code&gt; 选项，可以看到右上角多了一个 &lt;code&gt;代理集合&lt;/code&gt; 按钮，点开后可以看到合并进去的所有订阅源的信息。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://s2.loli.net/2025/12/16/VSHhCa8ZiDgGueU.png&quot; alt=&quot;Clash-Verge-Rev-代理集合&quot; /&gt;&lt;/p&gt;
&lt;h2&gt;说明&lt;/h2&gt;
&lt;p&gt;以我的示例配置为例，在使用代理时，会优先使用 &lt;code&gt;订阅1&lt;/code&gt; 里速度最快的节点，当该节点失效后尝试使用 &lt;code&gt;订阅1&lt;/code&gt; 里的其它节点，当 &lt;code&gt;订阅1&lt;/code&gt; 的节点全部失效时才会尝试使用 &lt;code&gt;订阅2&lt;/code&gt; 里的节点。&lt;/p&gt;
</content:encoded></item><item><title>在阿里云云服务器部署 Gitea</title><link>https://blog.unknowncat2048.top/posts/devops/deploy-gitea-service-on-aliyun/</link><guid isPermaLink="true">https://blog.unknowncat2048.top/posts/devops/deploy-gitea-service-on-aliyun/</guid><description>在阿里云云服务器上，基于 Debian 操作系统部署 Gitea 服务</description><pubDate>Fri, 23 May 2025 00:00:00 GMT</pubDate><content:encoded>&lt;h2&gt;前言&lt;/h2&gt;
&lt;p&gt;在之前的文章 &lt;a href=&quot;https://unknowncat2048.github.io/posts/deploying-git-lfs-service-locally/&quot;&gt;《本地部署简单的 Git-LFS 服务》&lt;/a&gt;介绍了如何在本地部署 LFS 服务，该方法只适合个人开发。现在需要与他人协同进行开发，在本地部署的 LFS 服务已经无法满足当前的需求。&lt;/p&gt;
&lt;p&gt;因此选择购买阿里云云服务器部署 &lt;code&gt;Gitea&lt;/code&gt; 服务，并且不额外部署数据库服务，在没有域名的情况下启用 https。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;[!NOTE]&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;服务器镜像&lt;/strong&gt;：Debian 11.3&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Gitea 版本&lt;/strong&gt;：1.23.8&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2&gt;系统与环境准备&lt;/h2&gt;
&lt;h3&gt;更新系统软件包&lt;/h3&gt;
&lt;pre&gt;&lt;code&gt;sudo apt update &amp;amp;&amp;amp; sudo apt upgrade -y
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;检查是否安装 Git。&lt;strong&gt;要求 Git 版本 &amp;gt;= 2.0&lt;/strong&gt;。没有安装 Git 的话通过 apt 进行安装。&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;git --version
sudo apt install git -y
&lt;/code&gt;&lt;/pre&gt;
&lt;h3&gt;创建用户&lt;/h3&gt;
&lt;pre&gt;&lt;code&gt;sudo adduser \
  --system \
  --shell /bin/bash \
  --gecos &apos;Git Version Control&apos; \
  --group \
  --disabled-password \
  --home /home/git \
  git
&lt;/code&gt;&lt;/pre&gt;
&lt;h2&gt;安装 Gitea&lt;/h2&gt;
&lt;h3&gt;下载二进制文件&lt;/h3&gt;
&lt;p&gt;在&lt;a href=&quot;https://dl.gitea.com/gitea/&quot;&gt;这里&lt;/a&gt;查看 Gitea 的所有版本。&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;wget -O gitea https://dl.gitea.com/gitea/1.23.8/gitea-1.23.8-linux-amd64
sudo chown root:root gitea
sudo chmod -x gitea
sudo mv gitea /usr/local/bin/gitea
&lt;/code&gt;&lt;/pre&gt;
&lt;h3&gt;创建工作文件夹&lt;/h3&gt;
&lt;pre&gt;&lt;code&gt;mkdir -p /var/lib/gitea/{custom,data,log}
chown -R git:git /var/lib/gitea/
chmod -R 750 /var/lib/gitea/
mkdir /etc/gitea
chown root:git /etc/gitea
chmod 770 /etc/gitea
&lt;/code&gt;&lt;/pre&gt;
&lt;h2&gt;以 service 方式运行&lt;/h2&gt;
&lt;p&gt;创建 systemd 服务文件：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;sudo nano /etc/systemd/system/gitea.service
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;在文件中填写以下内容：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[Unit]
Description=Gitea (Git with a cup of tea)
After=syslog.target
After=network.target

[Service]
RestartSec=2s
Type=simple
User=git
Group=git
WorkingDirectory=/var/lib/gitea/
ExecStart=/usr/local/bin/gitea web --config /etc/gitea/app.ini
Restart=always
Environment=USER=git HOME=/home/git GITEA_WORK_DIR=/var/lib/gitea

[Install]
WantedBy=multi-user.target
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;服务文件编辑完成后，重新加载服务单元文件、设置 Gitea 服务开机自启、启动 Gitea 服务：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;sudo systemctl daemon-reload
sudo systemctl enable gitea
sudo systemctl start gitea
&lt;/code&gt;&lt;/pre&gt;
&lt;h2&gt;进行 Web 安装&lt;/h2&gt;
&lt;p&gt;这时我们还无法访问 Gitea 页面，需要在阿里云服务器的防火墙设置里添加规则，开放 Gitea 默认的 3000 端口。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://s2.loli.net/2025/06/23/7zKeROoi4LUaFHT.png&quot; alt=&quot;Aliyun-GItea-FireWall&quot; /&gt;&lt;/p&gt;
&lt;p&gt;设置完成后就可以通过 &lt;code&gt;http://your-server-ip:3000&lt;/code&gt; 访问 Gitea 的 Web 安装界面。&lt;/p&gt;
&lt;p&gt;因为是个人使用，数据库选择 Gitea 内置的 SQLite3。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://s2.loli.net/2025/06/23/KZ89yPHSMixvhTz.png&quot; alt=&quot;Aliyun-Gitea-Database&quot; /&gt;&lt;/p&gt;
&lt;p&gt;一般设置根据个人需求进行填写。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://s2.loli.net/2025/06/23/afbDMcHpO3eISBz.png&quot; alt=&quot;Aliyun-Gitea-NormalSetting&quot; /&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;[!TIP]&lt;/p&gt;
&lt;p&gt;启用检查更新并不会自动进行版本更新，只是在访问网页时会提示用户有更新的版本。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;因为我们只是自己使用，为确保隐私，我们在&lt;code&gt;“可选设置&amp;gt;服务器和第三方服务设置”&lt;/code&gt;中勾选禁止用户自主注册、启用页面访问限制。之后使用管理员账户在&lt;code&gt;“管理后台&amp;gt;身份及认证&amp;gt;账户管理”&lt;/code&gt;中创建普通账户使用。&lt;/p&gt;
&lt;h2&gt;其它设置&lt;/h2&gt;
&lt;h3&gt;配置文件权限设为只读&lt;/h3&gt;
&lt;p&gt;在之前的步骤中为了使 Web 安装程序可以创建并写入配置文件，我们为 &lt;code&gt;/etc/gitea&lt;/code&gt; 路径授予了组外用户 &lt;code&gt;git&lt;/code&gt; 写入权限。在安装完成后需要将权限设为只读。&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;sudo chmod 750 /etc/gitea
sudo chmod 640 /etc/gitea/app.ini
&lt;/code&gt;&lt;/pre&gt;
&lt;h3&gt;开启 https 并设置自签名证书&lt;/h3&gt;
&lt;p&gt;生成自签名证书：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;sudo openssl req -x509 -nodes -days 365 \
  -newkey rsa:2048 \
  -keyout /etc/gitea/gitea.key \
  -out /etc/gitea/gitea.crt \
  -subj &quot;/CN=your-server-ip&quot; \
  -addext &quot;subjectAltName=IP:your-server-ip&quot;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;修改证书文件的所有权与权限：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;sudo chown git:git /etc/gitea/{gitea.key,gitea.crt}
sudo chmod 440 /etc/gitea/{gitea.key,gitea.crt}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;编辑配置文件 &lt;code&gt;/etc/gitea/app.ini&lt;/code&gt;：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[server]
PROTOCOL = https
CERT_FILE = /etc/gitea/gitea.crt
KEY_FILE = /etc/gitea/gitea.key
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;修改完成后重启 Gitea 服务：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;sudo systemctl restart gitea
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;重启服务后就可以通过 &lt;code&gt;https://your-server-ip:3000&lt;/code&gt; 访问，浏览器会警告“此连接不安全”，可以手动信任这个证书。Git 程序&lt;strong&gt;无法自动信任自签名证书&lt;/strong&gt;，需要在电脑上安装刚才生成的证书。&lt;/p&gt;
&lt;h3&gt;修改 RSA 公钥的最小位数&lt;/h3&gt;
&lt;p&gt;自 2020 年后 OpenSSH 8.0 及以上版本成为主流，RSA 密钥的公钥默认长度为 3072 位，出于安全性考虑 2048 位 RSA 已逐步不被推荐。如果出于某些原因不得不接着使用 2048 位 RSA，则需要在配置文件中添加如下配置：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[ssh.minimum_key_sizes]
RSA = 2047
&lt;/code&gt;&lt;/pre&gt;
&lt;h3&gt;开启推送自动创建仓库&lt;/h3&gt;
&lt;pre&gt;&lt;code&gt;[repository]
ENABLE_PUSH_CREATE_USER = true
ENABLE_PUSH_CREATE_ORG = true
&lt;/code&gt;&lt;/pre&gt;
&lt;h3&gt;修改 Log 模式&lt;/h3&gt;
&lt;p&gt;默认为 &lt;code&gt;console&lt;/code&gt; 模式，所有日志将会打印到控制台，由系统级别日志系统管理。改为 &lt;code&gt;file&lt;/code&gt; 模式日志将会保存至 &lt;code&gt;/var/lib/gitea/log/gitea.log&lt;/code&gt;，这对后续系统迁移或许有些作用。&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[log]
MODE = file
&lt;/code&gt;&lt;/pre&gt;
&lt;h3&gt;开启无用 LFS 文件的清理&lt;/h3&gt;
&lt;pre&gt;&lt;code&gt;[cron.gc_lfs]
ENABLED = true
SCHEDULE = @midnight
OLDER_THAN = 168h
LAST_UPDATED_MORE_THAN_AGO = 24h
NUMBER_TO_CHECK_PER_REPO = 0
&lt;/code&gt;&lt;/pre&gt;
</content:encoded></item><item><title>如何使用国际版 Unity Hub</title><link>https://blog.unknowncat2048.top/posts/dev-tool/how-to-use-global-unity-hub/</link><guid isPermaLink="true">https://blog.unknowncat2048.top/posts/dev-tool/how-to-use-global-unity-hub/</guid><description>避免“Unity 中国”并使用国际版 Unity Hub 以及 Unity Editor</description><pubDate>Sun, 23 Feb 2025 00:00:00 GMT</pubDate><content:encoded>&lt;h2&gt;下载安装国际版 Unity Hub&lt;/h2&gt;
&lt;p&gt;通过访问国际版 Unity Hub &lt;a href=&quot;https://unity.com/cn/download&quot;&gt;下载网页&lt;/a&gt;进行下载，也可以直接通过&lt;a href=&quot;https://public-cdn.cloud.unity3d.com/hub/prod/UnityHubSetup.exe&quot;&gt;下载链接&lt;/a&gt;下载。&lt;/p&gt;
&lt;h2&gt;避免网页重定向&lt;/h2&gt;
&lt;p&gt;在不使用代理的情况下，访问 &lt;strong&gt;unity.com&lt;/strong&gt; 会自动跳转到 &lt;strong&gt;unity.cn&lt;/strong&gt;。包括在使用国际版 Unity Hub 进行登录时，也会将 &lt;strong&gt;.com&lt;/strong&gt; 的登录链接重定向为 &lt;strong&gt;.cn&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;此时需要使用代理工具，以 &lt;code&gt;Clash&lt;/code&gt; 为例，通过添加对应的代理规则强制代理 &lt;code&gt;unity.com&lt;/code&gt; 和 &lt;code&gt;unity3d.com&lt;/code&gt; 域名，防止自动跳转：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;- DOMAIN-SUFFIX,unity.com,&amp;lt;YOUR_PROXY_GROUP_NAME&amp;gt;
- DOMAIN-SUFFIX,unity3d.com,&amp;lt;YOUR_PROXY_GROUP_NAME&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;直接修改 Profile 文件虽然可以正常使用，但在 Profile 文件手动/自动更新后就会覆盖掉我们的修改，每次更新后都需要再次修改，非常麻烦。&lt;/p&gt;
&lt;p&gt;此时可以使用 &lt;code&gt;Clash&lt;/code&gt; 的 &lt;code&gt;Parsers&lt;/code&gt; 功能，该功能可以在 Profile 文件更新完成后，对指定的 Profile 文件进行处理：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;parsers: # array
  - url: &amp;lt;YOUR_PROFILE_URL&amp;gt;
    yaml:
      prepend-rules:
        - DOMAIN-SUFFIX,unity.com,&amp;lt;YOUR_PROXY_GROUP_NAME&amp;gt;
        - DOMAIN-SUFFIX,unity3d.com,&amp;lt;YOUR_PROXY_GROUP_NAME&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;完成 Parsers 的修改后，手动更新一下 Profile 即可立即生效，此时访问 Unity 官网就不会再重定向了。&lt;/p&gt;
&lt;h2&gt;代理 Unity Hub&lt;/h2&gt;
&lt;p&gt;尽管我们对 Unity 相关域名进行了强制代理，但在直接运行国际版 Unity Hub 并尝试登录时，跳转到的登录页面仍然会被重定向至 &lt;strong&gt;.cn&lt;/strong&gt;。因此我们需要使国际版 Unity Hub 在启动时强制走代理。&lt;/p&gt;
&lt;p&gt;新建一个启动脚本 &lt;code&gt;Launch_Unity_Hub.cmd&lt;/code&gt;：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;@echo off
set HTTP_PROXY=http://127.0.0.1:7890
set HTTPS_PROXY=http://127.0.0.1:7890
start &quot;&quot; &quot;C:\Program Files\Unity Hub\Unity Hub.exe&quot;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;之后通过脚本启动 Unity Hub 就不会跳转了。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://s2.loli.net/2025/02/26/24K8gzVhrUCpBjx.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;
&lt;p&gt;国际版 Hub 没有烦人的左侧栏，还可以直接下载没有 c1 后缀的编辑器。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;[!IMPORTANT]&lt;/p&gt;
&lt;p&gt;根据网友的说法，团结引擎会对资源文件对应的 &lt;strong&gt;.meta&lt;/strong&gt; 文件中的 &lt;strong&gt;guid&lt;/strong&gt; 进行加密，项目可以从国际版转到团结，但是无法从团结转回国际版。&lt;/p&gt;
&lt;p&gt;此说法仅供参考，未经验证。&lt;/p&gt;
&lt;/blockquote&gt;
</content:encoded></item><item><title>Unity-Demo-扫雷-Minesweeper</title><link>https://blog.unknowncat2048.top/posts/game-demo/unity-demo-minesweeper/</link><guid isPermaLink="true">https://blog.unknowncat2048.top/posts/game-demo/unity-demo-minesweeper/</guid><description>基于 Unity 开发的扫雷游戏，支持 PC 端和移动端，包含完整的游戏功能和界面适配</description><pubDate>Thu, 09 Jan 2025 00:00:00 GMT</pubDate><content:encoded>&lt;h2&gt;项目概述&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;项目名称&lt;/strong&gt;：Minesweeper&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;最新版本&lt;/strong&gt;：v1.1.1&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;最后更新&lt;/strong&gt;：2025年1月11日&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;在线演示&lt;/strong&gt;：&lt;a href=&quot;https://unknowncat2048.github.io/Minesweeper-Page&quot;&gt;Minesweeper-Page&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;游戏操作说明&lt;/h2&gt;
&lt;h3&gt;PC 端操作&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;左键点击：揭开格子&lt;/li&gt;
&lt;li&gt;右键点击：标记/取消标记格子&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;移动端操作&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;点击：揭开格子&lt;/li&gt;
&lt;li&gt;长按（0.3s）：标记/取消标记格子&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;版本更新日志&lt;/h2&gt;
&lt;h3&gt;v1.1.1 (2025-01-11)&lt;/h3&gt;
&lt;h4&gt;🛠️ 问题修复&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;修复了揭开周围格子时未正确处理已标记格子的问题&lt;/li&gt;
&lt;li&gt;修复了可能存在的无法触发游戏结束判断的问题&lt;/li&gt;
&lt;/ul&gt;
&lt;h4&gt;🔧 功能调整&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;优化了主菜单标题显示&lt;/li&gt;
&lt;li&gt;将移动端长按标记的触发时间从 0.5s 调整为 0.3s，提升操作体验&lt;/li&gt;
&lt;/ul&gt;
&lt;hr /&gt;
&lt;h3&gt;v1.1.0 (2025-01-09)&lt;/h3&gt;
&lt;h4&gt;✨ 新功能&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;新增彩色数字显示功能，提升游戏视觉效果&lt;/li&gt;
&lt;/ul&gt;
&lt;h4&gt;🛠️ 问题修复&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;修复了移动端无法标记的问题&lt;/li&gt;
&lt;/ul&gt;
&lt;h4&gt;🔧 功能调整&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;优化了游戏主题配色方案&lt;/li&gt;
&lt;/ul&gt;
&lt;hr /&gt;
&lt;h3&gt;v1.0.0 (2025-01-09)&lt;/h3&gt;
&lt;h4&gt;✨ 基础功能&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;实现了扫雷游戏的核心玩法&lt;/li&gt;
&lt;li&gt;支持基本的游戏操作&lt;/li&gt;
&lt;li&gt;完整的游戏流程&lt;/li&gt;
&lt;/ul&gt;
</content:encoded></item><item><title>Unity-Demo-数独-Sudoku</title><link>https://blog.unknowncat2048.top/posts/game-demo/unity-demo-sudoku/</link><guid isPermaLink="true">https://blog.unknowncat2048.top/posts/game-demo/unity-demo-sudoku/</guid><description>基于 Unity 开发的数独游戏，支持 PC 端和移动端，包含完整的游戏功能和界面适配</description><pubDate>Thu, 02 Jan 2025 00:00:00 GMT</pubDate><content:encoded>&lt;h2&gt;项目概述&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;项目名称&lt;/strong&gt;：Sudoku&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;最新版本&lt;/strong&gt;：v2.0.0&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;最后更新&lt;/strong&gt;：2025年1月14日&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;在线演示&lt;/strong&gt;：&lt;a href=&quot;https://unknowncat2048.github.io/Sudoku-Page&quot;&gt;Sudoku-Page&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;游戏特性&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;完整的数独游戏功能&lt;/li&gt;
&lt;li&gt;支持 PC 端和移动端&lt;/li&gt;
&lt;li&gt;优化的用户界面&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;版本更新日志&lt;/h2&gt;
&lt;h3&gt;v2.0.0 (2025-01-14)&lt;/h3&gt;
&lt;h4&gt;✨ 重要更新&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;项目架构重构，提升代码质量和可维护性&lt;/li&gt;
&lt;li&gt;优化移动端界面适配，提供更好的用户体验&lt;/li&gt;
&lt;/ul&gt;
&lt;hr /&gt;
&lt;h3&gt;v1.0.2 (2025-01-03)&lt;/h3&gt;
&lt;h4&gt;🔧 功能优化&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;在主菜单界面添加版本信息显示&lt;/li&gt;
&lt;li&gt;增加项目展示声明&lt;/li&gt;
&lt;/ul&gt;
&lt;hr /&gt;
&lt;h3&gt;v1.0.1 (2025-01-03)&lt;/h3&gt;
&lt;h4&gt;🛠️ 问题修复&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;修复 WebGL 平台中文显示问题&lt;/li&gt;
&lt;li&gt;修复游戏界面后退按钮显示异常&lt;/li&gt;
&lt;/ul&gt;
&lt;h4&gt;🔧 界面优化&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;移除主菜单中的退出按钮&lt;/li&gt;
&lt;/ul&gt;
&lt;hr /&gt;
&lt;h3&gt;v1.0.0 (2025-01-02)&lt;/h3&gt;
&lt;h4&gt;✨ 基础功能&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;实现数独游戏核心玩法&lt;/li&gt;
&lt;li&gt;支持基本的游戏操作&lt;/li&gt;
&lt;li&gt;完整的游戏流程&lt;/li&gt;
&lt;/ul&gt;
</content:encoded></item><item><title>Unity 编辑器扩展（3）：组件菜单栏扩展</title><link>https://blog.unknowncat2048.top/posts/unity-editor-extension/unity-editor-extension-tutorial-3/</link><guid isPermaLink="true">https://blog.unknowncat2048.top/posts/unity-editor-extension/unity-editor-extension-tutorial-3/</guid><description>详细介绍 Unity 编辑器组件菜单扩展的实现方法，包括组件新建菜单、组件右键菜单和字段右键菜单的扩展功能</description><pubDate>Mon, 16 Dec 2024 11:54:00 GMT</pubDate><content:encoded>&lt;h2&gt;组件新建菜单扩展&lt;/h2&gt;
&lt;p&gt;默认情况下，我们自己编写的脚本会被放置在 &quot;Component &amp;gt; Scripts&quot; 中。使用 &lt;code&gt;AddComponentMenu&lt;/code&gt; 特性标记脚本可以指定脚本在 Component 菜单中的路径。&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;using System.Collections;
using System.Collections.Generic;
using UnityEngine;

[AddComponentMenu(&quot;Test/TestAddComponentMenu&quot;)]
public class TestAddComponentMenu : MonoBehaviour
{
    // Start is called before the first frame update
    void Start()
    {
        
    }

    // Update is called once per frame
    void Update()
    {
        
    }
}
&lt;/code&gt;&lt;/pre&gt;
&lt;blockquote&gt;
&lt;p&gt;[!NOTE]&lt;/p&gt;
&lt;p&gt;根据官方 API 文档的说法，需要重新启动才可以生效，但是在实际使用中修改完成就可生效。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;该特性也提供另一个重载 &lt;code&gt;AddComponentMenu(string menuName, int order)&lt;/code&gt; 用以对同一路径下的同级脚本进行排序，&lt;code&gt;order&lt;/code&gt; 的值越大排序越靠下。&lt;/p&gt;
&lt;h2&gt;组件菜单扩展&lt;/h2&gt;
&lt;h3&gt;ContextMenu 特性&lt;/h3&gt;
&lt;p&gt;该特性用于自定义扩展脚本在 Inspector 窗口中的右键菜单，通常用于快捷的设置数据。该特性需要标记脚本内的非静态方法。&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;using System.Collections;
using System.Collections.Generic;
using UnityEngine;

public class TestMonoBehaviour : MonoBehaviour
{
    public int Num = 0;

    [ContextMenu(&quot;Reset Num&quot;)]
    private void ResetNum()
    {
        Num = 1;
    }
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;该特性接受三个参数 &lt;code&gt;ContextMenu(string itemName, bool isValidateFunction, int priority)&lt;/code&gt;，可参照&lt;a href=&quot;https://blog.unknowncat2048.top/posts/unity-editor-extension/unity-editor-extension-tutorial-2/&quot;&gt;《Unity 编辑器扩展（2）》&lt;/a&gt;。&lt;/p&gt;
&lt;h3&gt;ContextMenuItem 特性&lt;/h3&gt;
&lt;p&gt;该特性可将自定义方法添加到字段的右键菜单中。&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;using System.Collections;
using System.Collections.Generic;
using UnityEngine;

public class TestMonoBehaviour : MonoBehaviour
{
    [ContextMenuItem(&quot;Reset Num&quot;, &quot;ResetNum&quot;)]
    public int Num = 0;

    private void ResetNum()
    {
        Num = 1;
    }
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;该特性有两个参数，一个变量：&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;参数名&lt;/th&gt;
&lt;th&gt;类型&lt;/th&gt;
&lt;th&gt;描述&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;name&lt;/td&gt;
&lt;td&gt;string&lt;/td&gt;
&lt;td&gt;在右键菜单中的名称&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;function&lt;/td&gt;
&lt;td&gt;string&lt;/td&gt;
&lt;td&gt;要执行的方法&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;order&lt;/td&gt;
&lt;td&gt;int&lt;/td&gt;
&lt;td&gt;在右键菜单中的排序（可选）&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;使用示例：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[ContextMenuItem(string name, string function, order = int)]
&lt;/code&gt;&lt;/pre&gt;
</content:encoded></item><item><title>Unity 编辑器扩展（2）：菜单栏扩展</title><link>https://blog.unknowncat2048.top/posts/unity-editor-extension/unity-editor-extension-tutorial-2/</link><guid isPermaLink="true">https://blog.unknowncat2048.top/posts/unity-editor-extension/unity-editor-extension-tutorial-2/</guid><description>详细介绍 Unity 编辑器菜单栏扩展的实现方法，包括顶部菜单栏、Hierarchy 和 Project 窗口的右键菜单扩展，以及快捷键设置</description><pubDate>Mon, 16 Dec 2024 00:00:00 GMT</pubDate><content:encoded>&lt;h2&gt;顶部菜单栏扩展&lt;/h2&gt;
&lt;p&gt;Unity 默认的顶部菜单栏如下图，我们可以在这里添加自定义工具。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://s2.loli.net/2024/12/12/bg8LowY7KMjihWr.png&quot; alt=&quot;image-20241212110536096&quot; /&gt;&lt;/p&gt;
&lt;p&gt;使用 &lt;code&gt;MenuItem&lt;/code&gt; 特性标记一个静态方法就可以在顶部栏添加自定义工具：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;using UnityEditor;
using UnityEngine;

public class TopbarExtension
{
    [MenuItem(&quot;Tool/Custom_1&quot;)]
    public static void Custom_1()
    {
        Debug.Log(&quot;TopbarExtension : Custom_1&quot;);
    }
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;等待编译完成后就可以在顶部栏看到自定义工具，点击后就会执行 &lt;code&gt;Custom_1&lt;/code&gt; 方法：&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://s2.loli.net/2024/12/12/1K2aqOEocdx7p95.png&quot; alt=&quot;image-20241212150031061&quot; /&gt;&lt;/p&gt;
&lt;h2&gt;MenuItem 特性参数&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;MenuItem&lt;/code&gt; 特性可以传入三个参数：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[MenuItem(string itemName, bool isValidateFunction, int priority)]
&lt;/code&gt;&lt;/pre&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;参数&lt;/th&gt;
&lt;th&gt;类型&lt;/th&gt;
&lt;th&gt;描述&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;itemName&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;string&lt;/td&gt;
&lt;td&gt;工具在菜单中的路径&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;isValidateFunction&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;bool&lt;/td&gt;
&lt;td&gt;是否用作相同 &lt;code&gt;itemName&lt;/code&gt; 方法的验证方法&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;priority&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;int&lt;/td&gt;
&lt;td&gt;工具在菜单中的优先级，默认值：1000&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3&gt;itemName 参数&lt;/h3&gt;
&lt;p&gt;该参数接受一个 string 类型参数，用来表示工具在顶部栏中的路径，通过 &quot;/&quot; 字符分割父子级。&lt;/p&gt;
&lt;h3&gt;isValidateFunction 参数&lt;/h3&gt;
&lt;p&gt;该参数接受一个 bool 类型参数，传入 true 时表示该方法为验证方法：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;验证方法会在具有相同 &lt;code&gt;itemName&lt;/code&gt; 方法之前执行&lt;/li&gt;
&lt;li&gt;验证方法必须返回 bool 才可以生效&lt;/li&gt;
&lt;li&gt;返回 false 时，&lt;code&gt;itemName&lt;/code&gt; 对应的菜单栏选项变为不可选状态&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;示例代码：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;using UnityEditor;
using UnityEngine;

public class TopbarExtension
{
    [MenuItem(&quot;Tool/Custom_1&quot;, false)]
    public static void Custom_1()
    {
        Debug.Log(&quot;TopbarExtension : Custom_1&quot;);
    }

    [MenuItem(&quot;Tool/Custom_1&quot;, true)]
    public static bool Custom_2()
    {
        return false;
    }
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;通过验证方法可以对工具执行的条件进行判断，防止在非预期的情况下运行。&lt;/p&gt;
&lt;h3&gt;priority 参数&lt;/h3&gt;
&lt;p&gt;该参数接受一个 int 类型参数，用来决定选项在菜单栏中的排列位置：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;菜单列表中处于同一级的不同方法之间会比较 &lt;code&gt;priority&lt;/code&gt; 的值&lt;/li&gt;
&lt;li&gt;值较大的选项会排在值较小的选项下面&lt;/li&gt;
&lt;li&gt;当两个选项的 &lt;code&gt;priority&lt;/code&gt; 值相差超过 10（&amp;gt;=11）时，会在两个选项之间显示一条分割线&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;快捷键设置&lt;/h2&gt;
&lt;p&gt;可以在 &lt;code&gt;itemName&lt;/code&gt; 中设置方法的快捷键：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;using UnityEditor;
using UnityEngine;

public class TopbarExtension
{
    [MenuItem(&quot;Tool/Custom_1 %#d&quot;, false)]
    public static void Custom_1()
    {
        Debug.Log(&quot;TopbarExtension : Custom_1&quot;);
    }

    [MenuItem(&quot;Tool/Custom_1 %#d&quot;, true)]
    public static bool Custom_2()
    {
        return false;
    }
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;通过空格字符区分路径文本和快捷键文本，为选项添加快捷键。例如 &lt;code&gt;%#d&lt;/code&gt; 将被解释为 &amp;lt;kbd&amp;gt;ctrl&amp;lt;/kbd&amp;gt;+&amp;lt;kbd&amp;gt;shift&amp;lt;/kbd&amp;gt;+&amp;lt;kbd&amp;gt;D&amp;lt;/kbd&amp;gt;。如果不需要特殊按键则需要以下划线开始，例如 &quot;Tool/Custom_1 _d&quot;。&lt;/p&gt;
&lt;p&gt;Unity 支持的快捷键组合：&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;快捷键文本&lt;/th&gt;
&lt;th&gt;对应的按键&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;%&lt;/td&gt;
&lt;td&gt;Windows: &amp;lt;kbd&amp;gt;ctrl&amp;lt;/kbd&amp;gt;&amp;lt;br&amp;gt;macOS: &amp;lt;kbd&amp;gt;cmd&amp;lt;/kbd&amp;gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;#&lt;/td&gt;
&lt;td&gt;&amp;lt;kbd&amp;gt;shift&amp;lt;/kbd&amp;gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&amp;amp;&lt;/td&gt;
&lt;td&gt;&amp;lt;kbd&amp;gt;alt&amp;lt;/kbd&amp;gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;LEFT&lt;/td&gt;
&lt;td&gt;&amp;lt;kbd&amp;gt;←&amp;lt;/kbd&amp;gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;RIGHT&lt;/td&gt;
&lt;td&gt;&amp;lt;kbd&amp;gt;→&amp;lt;/kbd&amp;gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;UP&lt;/td&gt;
&lt;td&gt;&amp;lt;kbd&amp;gt;↑&amp;lt;/kbd&amp;gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;DOWN&lt;/td&gt;
&lt;td&gt;&amp;lt;kbd&amp;gt;↓&amp;lt;/kbd&amp;gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;F1..F12&lt;/td&gt;
&lt;td&gt;&amp;lt;kbd&amp;gt;F1&amp;lt;/kbd&amp;gt;..&amp;lt;kbd&amp;gt;F12&amp;lt;/kbd&amp;gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;HOME&lt;/td&gt;
&lt;td&gt;&amp;lt;kbd&amp;gt;home&amp;lt;/kbd&amp;gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;END&lt;/td&gt;
&lt;td&gt;&amp;lt;kbd&amp;gt;end&amp;lt;/kbd&amp;gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;PGUP&lt;/td&gt;
&lt;td&gt;&amp;lt;kbd&amp;gt;page up&amp;lt;/kbd&amp;gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;PGDN&lt;/td&gt;
&lt;td&gt;&amp;lt;kbd&amp;gt;page down&amp;lt;/kbd&amp;gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h2&gt;右键菜单扩展&lt;/h2&gt;
&lt;h3&gt;Hierarchy 窗口右键菜单&lt;/h3&gt;
&lt;p&gt;Hierarchy 窗口的右键菜单对应着顶部菜单栏的 &lt;code&gt;GameObject&lt;/code&gt;，使用 &lt;code&gt;[MenuItem(&quot;GameObject/Custom_3&quot;)]&lt;/code&gt; 即可将方法显示在 Hierarchy 窗口的右键菜单中。&lt;/p&gt;
&lt;h3&gt;Project 窗口右键菜单&lt;/h3&gt;
&lt;p&gt;Project 窗口的右键菜单对应着顶部菜单栏的 &lt;code&gt;Assets&lt;/code&gt;，使用 &lt;code&gt;[MenuItem(&quot;Assets/Custom_4&quot;)]&lt;/code&gt; 即可将方法显示在 Project 窗口的右键菜单中。&lt;/p&gt;
</content:encoded></item><item><title>Unity 编辑器扩展（1）：入门</title><link>https://blog.unknowncat2048.top/posts/unity-editor-extension/unity-editor-extension-tutorial-1/</link><guid isPermaLink="true">https://blog.unknowncat2048.top/posts/unity-editor-extension/unity-editor-extension-tutorial-1/</guid><description>Unity 编辑器扩展的基础概念介绍，包括扩展类型和特殊文件夹的使用说明</description><pubDate>Mon, 09 Dec 2024 00:00:00 GMT</pubDate><content:encoded>&lt;h2&gt;概述&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;Unity 允许通过自定义 &lt;code&gt;Inspector&lt;/code&gt; 和 &lt;code&gt;编辑器窗口&lt;/code&gt; 来扩展编辑器。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2&gt;扩展类型&lt;/h2&gt;
&lt;p&gt;Unity 编辑器扩展主要分为以下几类：&lt;/p&gt;
&lt;h3&gt;菜单栏扩展&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;顶部栏菜单扩展&lt;/li&gt;
&lt;li&gt;右键菜单扩展&lt;/li&gt;
&lt;li&gt;组件新建菜单扩展&lt;/li&gt;
&lt;li&gt;组件菜单扩展&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;编辑器窗口扩展&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;自定义编辑器窗口&lt;/li&gt;
&lt;li&gt;自定义 Inspector 窗口&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;工具栏扩展&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;自定义工具栏按钮&lt;/li&gt;
&lt;li&gt;自定义工具栏面板&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;Gizmos 扩展&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;自定义 Gizmos 绘制&lt;/li&gt;
&lt;li&gt;自定义 Gizmos 图标&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;特殊文件夹&lt;/h2&gt;
&lt;p&gt;编辑器相关文件需要放到特定的&lt;a href=&quot;https://docs.unity.cn/cn/2020.3/Manual/SpecialFolders.html&quot;&gt;特殊文件夹&lt;/a&gt;中：&lt;/p&gt;
&lt;h3&gt;Editor 文件夹&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;编辑器扩展相关脚本需要放置在 &lt;code&gt;Editor&lt;/code&gt; 文件夹中&lt;/li&gt;
&lt;li&gt;该文件夹内的脚本将以编辑器脚本的形式运行&lt;/li&gt;
&lt;li&gt;该文件夹内的脚本不会被打包到最终的项目中&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;Editor Default Resources 文件夹&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;用于存放编辑器扩展脚本要用的资源，如图片、音频等&lt;/li&gt;
&lt;li&gt;使用 &lt;a href=&quot;https://docs.unity.cn/cn/2020.3/ScriptReference/EditorGUIUtility.Load.html&quot;&gt;EditorGUIUtility.Load&lt;/a&gt; 方法从该文件夹中读取所需资源&lt;/li&gt;
&lt;li&gt;也可以在 &lt;code&gt;Editor&lt;/code&gt; 文件夹中创建 &lt;code&gt;Resources&lt;/code&gt; 文件夹，并将所需资源放入其中&lt;/li&gt;
&lt;li&gt;同样使用 &lt;a href=&quot;https://docs.unity.cn/cn/2020.3/ScriptReference/EditorGUIUtility.Load.html&quot;&gt;EditorGUIUtility.Load&lt;/a&gt; 方法读取所需资源&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;Gizmos 文件夹&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;用于存放 &lt;a href=&quot;https://docs.unity.cn/cn/2020.3/ScriptReference/Gizmos.html&quot;&gt;Gizmos&lt;/a&gt; 所需的图片&lt;/li&gt;
&lt;li&gt;使用 &lt;a href=&quot;https://docs.unity.cn/cn/2020.3/ScriptReference/Gizmos.DrawIcon.html&quot;&gt;Gizmos.DrawIcon&lt;/a&gt; 读取所需图片并绘制&lt;/li&gt;
&lt;/ul&gt;
</content:encoded></item><item><title>在本地部署 Git-LFS 服务</title><link>https://blog.unknowncat2048.top/posts/devops/deploy-git-lfs-service-locally/</link><guid isPermaLink="true">https://blog.unknowncat2048.top/posts/devops/deploy-git-lfs-service-locally/</guid><description>使用 lfs-test-server 在本地搭建 Git-LFS 服务，用以项目中的大文件存储</description><pubDate>Tue, 01 Oct 2024 00:00:00 GMT</pubDate><content:encoded>&lt;h2&gt;前言&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;LFS Test Server is an example server that implements the &lt;a href=&quot;https://github.com/github/git-lfs/tree/master/docs/api#readme&quot;&gt;Git LFS API&lt;/a&gt;. It is intended to be used for testing the &lt;a href=&quot;https://github.com/github/git-lfs&quot;&gt;Git LFS&lt;/a&gt; client and is not in a production ready state.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/git-lfs/lfs-test-server&quot;&gt;lfs-test-server&lt;/a&gt; 是一个用于测试 &lt;a href=&quot;https://github.com/github/git-lfs&quot;&gt;Git LFS&lt;/a&gt; 客户端的示例服务器，&lt;strong&gt;并不适用于生产环境&lt;/strong&gt;。不过，对于本地测试或个人使用场景，它已经足够实用。如果需要更成熟的生产级 Git-LFS 服务，可以考虑使用 &lt;a href=&quot;https://about.gitea.com&quot;&gt;Gitea&lt;/a&gt; 或 &lt;a href=&quot;https://about.gitlab.com&quot;&gt;GitLab&lt;/a&gt;。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;[!IMPORTANT]&lt;/p&gt;
&lt;p&gt;本教程基于 &lt;strong&gt;Windows 系统&lt;/strong&gt; 环境编写，命令和路径以 Windows 为准。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;[!WARNING]&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;LFS Test Server 仅用于开发测试场景，切勿用于生产环境部署。&lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2&gt;安装 lfs-test-server&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;lfs-test-server&lt;/code&gt; 提供了多个版本的预编译 Windows 可执行文件，&lt;strong&gt;但最新的 Release 0.4.0 尚未提供预编译版本&lt;/strong&gt;，因此需要手动编译源代码。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;[!NOTE]&lt;/p&gt;
&lt;p&gt;若需自行编译，请确保已安装 Go 环境。可前往 Go 官方网站下载安装：https://golang.google.cn&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;使用 Go 安装最新版本：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;go install github.com/git-lfs/lfs-test-server@latest
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;执行上述命令后，安装器会自动获取源码及所需依赖并进行编译，最终将可执行程序放置在 &lt;code&gt;%GO_PATH%/bin&lt;/code&gt; 目录下。&lt;/p&gt;
&lt;h2&gt;使用 lfs-test-server&lt;/h2&gt;
&lt;h3&gt;启动服务&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;lfs-test-server&lt;/code&gt; 默认监听 8080 端口。首次启动时会在程序目录下生成相关文件和文件夹，用于管理和存储文件。通过环境变量可以对 &lt;code&gt;lfs-test-server&lt;/code&gt; 进行配置。&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;配置项&lt;/th&gt;
&lt;th&gt;描述&lt;/th&gt;
&lt;th&gt;默认值&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;LFS_LISTEN&lt;/td&gt;
&lt;td&gt;服务器监听的地址和端口&lt;/td&gt;
&lt;td&gt;tcp://:8080&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;LFS_HOST&lt;/td&gt;
&lt;td&gt;服务器生成 URL 时使用的主机&lt;/td&gt;
&lt;td&gt;localhost:8080&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;LFS_METADB&lt;/td&gt;
&lt;td&gt;服务器用于存储元信息的数据库文件&lt;/td&gt;
&lt;td&gt;lfs.db&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;LFS_CONTENTPATH&lt;/td&gt;
&lt;td&gt;存放 LFS 文件的路径&lt;/td&gt;
&lt;td&gt;lfs-content&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;LFS_ADMINUSER&lt;/td&gt;
&lt;td&gt;管理员用户名&lt;/td&gt;
&lt;td&gt;为空&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;LFS_ADMINPASS&lt;/td&gt;
&lt;td&gt;管理员密码&lt;/td&gt;
&lt;td&gt;为空&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;LFS_CERT&lt;/td&gt;
&lt;td&gt;TLS 证书文件&lt;/td&gt;
&lt;td&gt;为空&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;LFS_KEY&lt;/td&gt;
&lt;td&gt;TLS 密钥&lt;/td&gt;
&lt;td&gt;为空&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;LFS_SCHEME&lt;/td&gt;
&lt;td&gt;设置为 &quot;https&quot; 以覆盖默认的 http&lt;/td&gt;
&lt;td&gt;http&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;LFS_USETUS&lt;/td&gt;
&lt;td&gt;设置为 &quot;true&quot; 以启用 tusd (tus.io) 可恢复上传服务器；tusd 必须位于路径中且已单独安装&lt;/td&gt;
&lt;td&gt;false&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;LFS_TUSHOST&lt;/td&gt;
&lt;td&gt;用于启动 tusd 上传服务器的主机&lt;/td&gt;
&lt;td&gt;localhost:1080&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;创建配置文件 &lt;code&gt;config.txt&lt;/code&gt;，输入以下内容并根据需要进行配置：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;LFS_LISTEN=tcp://:8080
LFS_HOST=localhost:8080
LFS_METADB=lfs.db
LFS_CONTENTPATH=lfs-content
LFS_ADMINUSER=
LFS_ADMINPASS=
LFS_CERT=
LFS_KEY=
LFS_SCHEME=http
LFS_USETUS=false
LFS_TUSHOST=localhost:1080
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;创建启动脚本 &lt;code&gt;lfs-test-server.cmd&lt;/code&gt;：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;@echo off
setlocal enabledelayedexpansion

:: 从配置文件中读取配置
set CONFIG_FILE=config.txt
for /f &quot;tokens=1,2 delims==&quot; %%A in (&apos;findstr /r &quot;LFS_LISTEN LFS_HOST LFS_METADB LFS_CONTENTPATH LFS_ADMINUSER LFS_ADMINPASS LFS_CERT LFS_KEY LFS_SCHEME LFS_USETUS LFS_TUSHOST&quot; &quot;%CONFIG_FILE%&quot;&apos;) do (
    set &quot;key=%%~A&quot;
    set &quot;value=%%~B&quot;
    set &quot;!key!=!value!&quot;
)

:: 清理管理员凭据
if not &quot;%1&quot;==&quot;--admin&quot; (
    set &quot;LFS_ADMINUSER=&quot;
    set &quot;LFS_ADMINPASS=&quot;
)

:: 启动服务
start &quot;LFS Server&quot; lfs-test-server.exe

endlocal
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;执行启动脚本时传入 &lt;code&gt;--admin&lt;/code&gt; 参数才会启用管理员账户：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;lfs-test-server.cmd --admin
&lt;/code&gt;&lt;/pre&gt;
&lt;h3&gt;管理服务&lt;/h3&gt;
&lt;h4&gt;访问管理&lt;/h4&gt;
&lt;p&gt;启用管理员账户后，可通过 http://localhost:8080/mgmt 访问管理页面。&lt;/p&gt;
&lt;p&gt;通过管理页面的 User 选项可新增或删除访问用户，用于提供给其他用户使用。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;[!IMPORTANT]&lt;/p&gt;
&lt;p&gt;未启用管理员账户时不会运行管理页面，此时无法访问 http://localhost:8080/mgmt&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h4&gt;文件管理&lt;/h4&gt;
&lt;p&gt;lfs-test-server 不提供删除文件的功能。如果确定某个文件已不存在任何引用，并且不再需要该文件，需要手动查找并删除对应文件。删除文件后，使用 &lt;a href=&quot;https://github.com/br0xen/boltbrowser&quot;&gt;boltbrowser&lt;/a&gt; 打开 &lt;code&gt;lfs.db&lt;/code&gt;，找到 &lt;code&gt;objects&lt;/code&gt; 中对应的数据并删除。&lt;/p&gt;
&lt;p&gt;&amp;lt;!--### 断点续传&lt;/p&gt;
&lt;p&gt;为应对大文件传输过程中可能遇到的网络问题，lfs-test-server 支持使用 &lt;a href=&quot;https://github.com/tus/tusd&quot;&gt;tusd&lt;/a&gt; 进行断点续传。将 tusd 的二进制文件放置在路径下，修改配置文件即可：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;LFS_USETUS=true
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;::github{repo=&quot;tus/tusd&quot;}--&amp;gt;&lt;/p&gt;
</content:encoded></item><item><title>Unity 组件扩展存档</title><link>https://blog.unknowncat2048.top/posts/unity-editor-extension/unity-component-extension-archive/</link><guid isPermaLink="true">https://blog.unknowncat2048.top/posts/unity-editor-extension/unity-component-extension-archive/</guid><description>Unity 组件扩展存档，包含自定义摄像机 Gizmo 和文本组件增强功能</description><pubDate>Thu, 01 Aug 2024 00:00:00 GMT</pubDate><content:encoded>&lt;h2&gt;自定义摄像机 Gizmo 扩展&lt;/h2&gt;
&lt;p&gt;这个扩展为 Unity 摄像机组件添加了自定义的 Gizmo 显示功能，可以直观地展示摄像机的视口区域和关键参考线。&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;using System;
using System.Collections;
using System.Collections.Generic;
using System.Linq;
using UnityEditor;
using UnityEngine;

namespace PersonalTool
{
    [CustomEditor(typeof(Camera))]
    public class CameraCustomGizmos
    {
        private static float topBarHeight = 118.0328f;

        private static Mesh quad = null;

        private static float distance;
        private static Vector3 buttomLeft;
        private static Vector3 buttomRight;
        private static Vector3 topLeft;
        private static Vector3 topRight;

        [DrawGizmo(GizmoType.Selected | GizmoType.Active)]
        private static void OnDrawGizmosSelected(Camera camera, GizmoType gizmoType)
        {
            if (quad is null)
            {
                //Library/unity default resources::Cube
                var type = typeof(Mesh);
                quad = AssetDatabase.LoadAllAssetsAtPath(&quot;Library/unity default resources&quot;)
                    .Where(e =&amp;gt; type.IsAssignableFrom(e.GetType()) &amp;amp;&amp;amp; e.name == &quot;Quad&quot;).Cast&amp;lt;Mesh&amp;gt;()?.First();
            }

            distance = camera.nearClipPlane * 1.001f;
            buttomLeft = new Vector3(0f, 0f, distance);
            buttomRight = new Vector3(Screen.width, 0f, distance);
            topLeft = new Vector3(0f, Screen.height, distance);
            topRight = new Vector3(Screen.width, Screen.height, distance);

            buttomLeft = camera.ScreenToWorldPoint(buttomLeft);
            buttomRight = camera.ScreenToWorldPoint(buttomRight);
            topLeft = camera.ScreenToWorldPoint(topLeft);
            topRight = camera.ScreenToWorldPoint(topRight);

            DrawBorderZone(camera);
            DrawViewCenterLine();
            DrawCenterPoint(camera);
        }

        private static void DrawBorderZone(Camera camera)
        {
            var topBarButtomLeft = new Vector3(0f, Screen.height - topBarHeight, distance);
            var topBarButtomRight = new Vector3(Screen.width, Screen.height - topBarHeight, distance);

            topBarButtomLeft = camera.ScreenToWorldPoint(topBarButtomLeft);
            topBarButtomRight = camera.ScreenToWorldPoint(topBarButtomRight);

            #region TopBar
            var width = Vector3.Distance(topBarButtomLeft, topBarButtomRight);
            var height = Vector3.Distance(topBarButtomLeft, topLeft);
            var size = new Vector3(width, height, 1f);

            Gizmos.color = new Color32(255, 0, 0, 60);
            Gizmos.DrawMesh(quad, (topBarButtomLeft + topRight) / 2f, camera.transform.rotation, size);
            #endregion

            var downBarTopLeft = new Vector3(0f, Screen.height * 0.1f, distance);
            var downBarTopRight = new Vector3(Screen.width, Screen.height * 0.1f, distance);

            downBarTopLeft = camera.ScreenToWorldPoint(downBarTopLeft);
            downBarTopRight = camera.ScreenToWorldPoint(downBarTopRight);

            #region ButtomBar
            width = Vector3.Distance(buttomLeft, buttomRight);
            height = Vector3.Distance(buttomLeft, downBarTopLeft);
            size = new Vector3(width, height, 1f);

            Gizmos.color = new Color32(255, 168, 0, 60);
            Gizmos.DrawMesh(quad, (buttomLeft + downBarTopRight) / 2f, camera.transform.rotation, size);
            #endregion

            var leftBarButtomRight = new Vector3(Screen.width * 0.1f, Screen.height * 0.1f, distance);
            var leftBarTopRight = new Vector3(Screen.width * 0.1f, Screen.height - topBarHeight, distance);

            leftBarButtomRight = camera.ScreenToWorldPoint(leftBarButtomRight);
            leftBarTopRight = camera.ScreenToWorldPoint(leftBarTopRight);

            #region LeftBar
            width = Vector3.Distance(downBarTopLeft, leftBarButtomRight);
            height = Vector3.Distance(downBarTopLeft, topBarButtomLeft);
            size = new Vector3(width, height, 1f);

            Gizmos.color = new Color32(255, 255, 0, 60);
            Gizmos.DrawMesh(quad, (downBarTopLeft + leftBarTopRight) / 2f, camera.transform.rotation, size);
            #endregion

            var rightBarButtomLeft = new Vector3(Screen.width * 0.9f, Screen.height * 0.1f, distance);
            var rightBarTopLeft = new Vector3(Screen.width * 0.9f, Screen.height - topBarHeight, distance);

            rightBarButtomLeft = camera.ScreenToWorldPoint(rightBarButtomLeft);
            rightBarTopLeft = camera.ScreenToWorldPoint(rightBarTopLeft);

            #region RightBar
            width = Vector3.Distance(rightBarButtomLeft, downBarTopRight);
            height = Vector3.Distance(rightBarButtomLeft, rightBarTopLeft);
            size = new Vector3(width, height, 1f);

            Gizmos.color = new Color32(255, 255, 0, 60);
            Gizmos.DrawMesh(quad, (rightBarButtomLeft + topBarButtomRight) / 2f, camera.transform.rotation, size);
            #endregion
        }

        private static void DrawViewCenterLine()
        {
            Gizmos.color = Color.cyan;
            Gizmos.DrawLine((topLeft + buttomLeft) / 2f, (topRight + buttomRight) / 2f);
            Gizmos.DrawLine((topLeft + topRight) / 2f, (buttomLeft + buttomRight) / 2f);
        }

        private static void DrawCenterPoint(Camera camera)
        {
            Gizmos.color = new Color32(255, 255, 0, 255);
            var length = Vector3.Distance(buttomLeft, topRight) * 0.005f;
            var size = new Vector3(length, length, 1f);
            Gizmos.DrawMesh(quad, (buttomLeft + topRight) / 2f, camera.transform.rotation, size);
        }
    }
}
&lt;/code&gt;&lt;/pre&gt;
&lt;h2&gt;文本组件扩展&lt;/h2&gt;
&lt;p&gt;这个扩展为 Unity 的 UI 文本组件添加了实用的编辑功能，包括空格替换和首行缩进功能。&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;using System;
using System.Collections;
using System.Collections.Generic;
using System.Text.RegularExpressions;
using UnityEditor;
using UnityEngine;
using UnityEngine.UI;

namespace PersonalTool
{
    [CustomEditor(typeof(Text))]
    public class TextComponentExtension : UnityEditor.UI.TextEditor
    {
        public override void OnInspectorGUI()
        {
            base.OnInspectorGUI();
            EditorGUILayout.Space();
            if (GUILayout.Button(&quot;替换所有空格为不换行空格&quot;))
            {
                var sp = serializedObject.FindProperty(&quot;m_Text&quot;);
                sp.stringValue = sp.stringValue.Replace(&quot; &quot;, &quot;\u00A0&quot;);
                serializedObject.ApplyModifiedProperties();
            }
            if (GUILayout.Button(&quot;添加首行缩进&quot;))
            {
                var sp = serializedObject.FindProperty(&quot;m_Text&quot;);
                if (!sp.stringValue.StartsWith(&quot;\u3000\u3000&quot;))
                    sp.stringValue = sp.stringValue.Insert(0, &quot;\u3000\u3000&quot;);
                sp.stringValue = Regex.Replace(sp.stringValue, @&quot;\n(?![\r\n\u3000])&quot;, &quot;\n\u3000\u3000&quot;);
                serializedObject.ApplyModifiedProperties();
            }
        }
    }
}
&lt;/code&gt;&lt;/pre&gt;
</content:encoded></item><item><title>Unity 编辑器扩展存档</title><link>https://blog.unknowncat2048.top/posts/unity-editor-extension/unity-editor-extension-archive/</link><guid isPermaLink="true">https://blog.unknowncat2048.top/posts/unity-editor-extension/unity-editor-extension-archive/</guid><description>Unity 编辑器扩展存档，包含曲线工具、正则测试工具和文件创建扩展等实用功能</description><pubDate>Thu, 01 Aug 2024 00:00:00 GMT</pubDate><content:encoded>&lt;h2&gt;曲线工具&lt;/h2&gt;
&lt;p&gt;这个工具用于生成和编辑 Unity 的 &lt;code&gt;AnimationCurve&lt;/code&gt; 曲线，可以方便地将曲线数据转换为代码，也可以从代码中还原曲线。&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;using System.Collections;
using System.Collections.Generic;
using System.Text.RegularExpressions;
using UnityEditor;
using UnityEngine;

public class CurveTool : EditorWindow
{
	private AnimationCurve curve;

    private string target_Str = &quot;&quot;;

	[MenuItem(&quot;工具/曲线工具&quot;)]
    public static void OpenWindow()
	{
		GetWindow&amp;lt;CurveTool&amp;gt;(&quot;曲线工具&quot;);
    }

	private void OnGUI()
	{
		GUILayout.Space(20f);
		EditorGUILayout.CurveField(curve);

		GUILayout.Space(20f);
		if (GUILayout.Button(&quot;生成&quot;))
		{
			target_Str = &quot;&quot;;
			target_Str += $&quot;AnimationCurve curve;\n&quot;;
			target_Str += $&quot;Keyframe[] keyframes = new Keyframe[{curve.length}];\n&quot;;
			for (int i = 0; i &amp;lt; curve.length; i++)
				target_Str += $&quot;keyframes[{i}] = new Keyframe({curve.keys[i].time}f, {curve.keys[i].value}f, {curve.keys[i].inTangent}f, {curve.keys[i].outTangent}f, {curve.keys[i].inWeight}f, {curve.keys[i].outWeight}f);\n&quot;;
			target_Str += $&quot;curve = new AnimationCurve(keyframes);&quot;;
		}

		GUILayout.Space(20f);
		target_Str = GUILayout.TextArea(target_Str);

		if (GUILayout.Button(&quot;复原&quot;))
		{
			MatchCollection mc = Regex.Matches(target_Str, @&quot;-*?\d+(\.\d+)*(?=f)&quot;);
			List&amp;lt;Keyframe&amp;gt; keys = new List&amp;lt;Keyframe&amp;gt;();
            Keyframe key = new Keyframe();
            for (int i = 0; i &amp;lt; mc.Count; i++)
            {
                switch (i % 6)
                {
                    case 0:
                        key = new Keyframe();
                        key.time = float.Parse(mc[i].Value);
						break;

                    case 1:
                        key.value = float.Parse(mc[i].Value);
                        break;

                    case 2:
                        key.inTangent = float.Parse(mc[i].Value);
                        break;

                    case 3:
                        key.outTangent = float.Parse(mc[i].Value);
                        break;

                    case 4:
                        key.inWeight = float.Parse(mc[i].Value);
                        break;

                    case 5:
                        key.outWeight = float.Parse(mc[i].Value);
                        keys.Add(key);
                        break;
                }
            }
			curve = new AnimationCurve(keys.ToArray());
        }
	}
}

&lt;/code&gt;&lt;/pre&gt;
&lt;h2&gt;正则测试工具&lt;/h2&gt;
&lt;p&gt;这个工具提供了一个可视化的正则表达式测试环境，支持多种文本输入方式，包括自定义文本、脚本文件和 StepScript。&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;using System.Collections;
using System.Collections.Generic;
using System.IO;
using System.Text.RegularExpressions;
using UnityEditor;
using UnityEngine;

namespace PersonalTool
{
    public class RegexTestTool : EditorWindow
    {
        public static RegexTestTool Tool;

        private string regexStr;
        private Vector2 scrollPos = Vector2.zero;

        private string fileString;
        private MatchCollection matches = null;
        private string[] splits = null;

        private string coverStr = &quot;&quot;;

        private int preFileType = 0;
        private int fileType = 0;

        private string filename = &quot;&quot;;
        private string fileID = &quot;&quot;;

        private bool isTrans = true;

        [MenuItem(&quot;工具/正则测试工具&quot;)]
        private static void OpenWindow()
        {
            Tool = GetWindow&amp;lt;RegexTestTool&amp;gt;(&quot;正则测试工具&quot;);
            Tool.Show();
        }

        private void OnEnable()
        {
            using (StreamReader sr = new StreamReader(Application.dataPath + &quot;&amp;lt;FILE_PATH&amp;gt;&quot;))
            {
                fileString = sr.ReadToEnd();
            }
        }

        private void OnGUI()
        {
            GUILayout.Label(&quot;正则表达式&quot;);
            regexStr = GUILayout.TextArea(regexStr);
            EditorGUILayout.BeginHorizontal();
            fileType = GUILayout.Toolbar(fileType, new string[] { &quot;自定义文本&quot;, &quot;脚本&quot;, &quot;StepScript&quot; });
            if (preFileType != fileType)
            {
                coverStr = &quot;&quot;;
                fileID = &quot;&quot;;
                preFileType = fileType;
            }
            EditorGUILayout.EndHorizontal();
            switch (fileType)
            {
                case 0:
                    GUILayout.Label(&quot;覆盖测试文本&quot;);
                    coverStr = GUILayout.TextArea(coverStr);
                    break;

                case 1:
                    EditorGUILayout.BeginHorizontal();
                    GUILayout.Label(&quot;脚本名称&quot;);
                    filename = GUILayout.TextField(filename);
                    if (GUILayout.Button(&quot;确定&quot;))
                    {
                        if (CheckInput(filename, out string id))
                        {
                            string filePath = Application.dataPath + $&quot;&amp;lt;FILE_PATH&amp;gt;&quot;;
                            if (File.Exists(filePath))
                            {
                                fileID = id;
                                coverStr = File.ReadAllText(filePath);
                            }
                        }
                    }
                    EditorGUILayout.EndHorizontal();
                    GUILayout.Label($&quot;当前脚本：{(fileID == &quot;&quot; ? &quot;&amp;lt;FILE_NAME&amp;gt;&quot; : fileID)}&quot;);
                    break;

                case 2:
                    if (File.Exists(Application.dataPath + $&quot;/.StepEditorProgram/StepScript.txt&quot;))
                    {
                        coverStr = File.ReadAllText(Application.dataPath + $&quot;/.StepEditorProgram/StepScript.txt&quot;);
                    }
                    GUILayout.Label($&quot;StepScript 加载{(coverStr == &quot;&quot; ? &quot;失败&quot; : &quot;成功&quot;)}&quot;);
                    isTrans = GUILayout.Toggle(isTrans, &quot;是否转义回正常符号&quot;);
                    break;
            }
            EditorGUILayout.Space();
            EditorGUILayout.BeginHorizontal();
            if (GUILayout.Button(&quot;Match&quot;))
            {
                if (regexStr == null || regexStr == &quot;&quot;) return;
                matches = null;
                splits = null;
                matches = Regex.Matches(coverStr != &quot;&quot; ? coverStr : fileString, regexStr, RegexOptions.ExplicitCapture);
                //var obj = AssetDatabase.LoadAssetAtPath&amp;lt;Object&amp;gt;(&quot;&amp;lt;FILE_PATH&amp;gt;&quot;);
                //Selection.activeObject = obj;
                //EditorGUIUtility.PingObject(obj);
                //Regex.Match(&quot;12&quot;, @&quot;{[^{}]*(((?&apos;Open&apos;{)[^{}]*)+((?&apos;-Open&apos;})[^{}]*)+)*(?(Open)(?!))}&quot;);
                //Regex.Match(&quot;12&quot;, @&quot;[\x20\t]+case\s+\d+\s*:[\s\S]*?break;&quot;);
                //Regex.Match(&quot;12&quot;, @&quot;public\s+(async\s+)?override\s+(async\s+)?void\s+(command(Start|Update|End))[^{]*?{((?&amp;lt;open&amp;gt;{)|(?&amp;lt;-open&amp;gt;})|[^{}])*(?(open)(?!))}\s*(#HH#)+&quot;);
                //Regex.Match(&quot;12&quot;, @&quot;(?&amp;lt;=#HH#)\s*switch\s*\(StepController\.Instance\.currentIndex\)[^{]*?{((?&amp;lt;open&amp;gt;{)|(?&amp;lt;-open&amp;gt;})|[^{}])*(?(open)(?!))}\s*(#HH#)+&quot;);
            }
            if (GUILayout.Button(&quot;Split&quot;))
            {
                if (regexStr == null || regexStr == &quot;&quot;) return;
                matches = null;
                splits = null;
                splits = Regex.Split(coverStr != &quot;&quot; ? coverStr : fileString, regexStr, RegexOptions.ExplicitCapture);
            }
            EditorGUILayout.EndHorizontal();
            if (GUILayout.Button(&quot;清除&quot;))
            {
                matches = null;
                splits = null;
            }
            if (matches != null &amp;amp;&amp;amp; matches.Count != 0)
            {
                scrollPos = EditorGUILayout.BeginScrollView(scrollPos);
                foreach (Match m in matches)
                {
                    string temp = &quot;&quot;;
                    if (isTrans)
                    {
                        temp = m.Value.Replace(&quot;#HH#&quot;, &quot;\n&quot;);
                        temp = temp.Replace(&quot;#SYH#&quot;, &quot;\&quot;&quot;);
                    }
                    EditorGUILayout.TextArea(isTrans ? temp : m.Value);
                }
                EditorGUILayout.EndScrollView();
            }
            if (splits != null &amp;amp;&amp;amp; splits.Length != 0)
            {
                scrollPos = EditorGUILayout.BeginScrollView(scrollPos);
                foreach (string s in splits)
                {
                    string temp = &quot;&quot;;
                    if (isTrans)
                    {
                        temp = s.Replace(&quot;#HH#&quot;, &quot;\n&quot;);
                        temp = temp.Replace(&quot;#SYH#&quot;, &quot;\&quot;&quot;);
                    }
                    EditorGUILayout.TextArea(isTrans ? temp : s);
                }
                EditorGUILayout.EndScrollView();
            }
        }

        private bool CheckInput(string inputStr, out string id)
        {
            id = null;
            if (Regex.IsMatch(inputStr, @&quot;^[Ee]+\d+[Cc]+\d+$&quot;))
            {
                id = Regex.Replace(inputStr, @&quot;[Ee]+&quot;, &quot;E&quot;);
                id = Regex.Replace(id, @&quot;[Cc]+&quot;, &quot;C&quot;);
                return true;
            }
            return false;
        }
    }
}
&lt;/code&gt;&lt;/pre&gt;
&lt;h2&gt;文件创建扩展&lt;/h2&gt;
&lt;p&gt;这个扩展提供了自定义的文件创建功能，包括 MLab 脚本、普通脚本和文本文件的创建，并支持自动替换文件模板中的关键字。&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;using System;
using System.Collections;
using System.Collections.Generic;
using System.IO;
using System.Text;
using System.Text.RegularExpressions;
using UnityEditor;
using UnityEngine;

namespace PersonalTool.FileExtension
{
    public class FileCreateExtension : EditorWindow
    {
        private const string MLAB_SCRIPT_TEMPLATE_PATH = &quot;Assets/Editor/PersonalTool/FileExtension/MLabScriptTemplate.txt&quot;;
        [MenuItem(&quot;Assets/Create/MLab Script (.cs)&quot;, false, 31)]
        public static void CreateFile_MLabScript()
        {
            string filePath = AssetDatabase.GenerateUniqueAssetPath(GetSelectedPathOrFallback() + &quot;NewMLabScript.cs&quot;);
            ProjectWindowUtil.CreateAssetWithContent(filePath, File.ReadAllText(MLAB_SCRIPT_TEMPLATE_PATH), EditorGUIUtility.FindTexture(&quot;d_cs Script Icon&quot;));
        }

        private const string NORMAL_SCRIPT_TEMPLATE_PATH = &quot;Assets/Editor/PersonalTool/FileExtension/NormalScriptTemplate.txt&quot;;
        [MenuItem(&quot;Assets/Create/Normal Script (.cs)&quot;, false, 31)]
        public static void CreateFile_NormalScript()
        {
            string filePath = AssetDatabase.GenerateUniqueAssetPath(GetSelectedPathOrFallback() + &quot;NewNormalScript.cs&quot;);
            ProjectWindowUtil.CreateAssetWithContent(filePath, File.ReadAllText(NORMAL_SCRIPT_TEMPLATE_PATH), EditorGUIUtility.FindTexture(&quot;d_cs Script Icon&quot;));
        }

        [MenuItem(&quot;Assets/Create/Text Asset (.txt)&quot;, false, 31)]
        public static void CreateFile_TextAsset()
        {
            string filePath = AssetDatabase.GenerateUniqueAssetPath(GetSelectedPathOrFallback() + &quot;New Text Asset.txt&quot;);
            ProjectWindowUtil.CreateAssetWithContent(filePath, &quot;&quot;, EditorGUIUtility.FindTexture(&quot;d_TextAsset Icon&quot;));
        }

        private static string GetSelectedPathOrFallback()
        {
            string path = &quot;Assets&quot;;
            foreach (UnityEngine.Object obj in Selection.GetFiltered&amp;lt;UnityEngine.Object&amp;gt;(SelectionMode.Assets))
            {
                path = AssetDatabase.GetAssetPath(obj);
                if (!string.IsNullOrEmpty(path) &amp;amp;&amp;amp; File.Exists(path))
                {
                    path = Path.GetDirectoryName(path);
                    break;
                }
            }
            return path + &quot;/&quot;;
        }
    }

    public class CustomFileProcessor : UnityEditor.AssetModificationProcessor
    {
        public const string CompanyName = &quot;moolsnet&quot;;
        public const string Author = &quot;请署名&quot;;
        public const string Version = &quot;1.0&quot;;

        private static void OnWillCreateAsset(string path)
        {
            path = path.Replace(&quot;.meta&quot;, &quot;&quot;);
            if (!path.EndsWith(&quot;.cs&quot;)) return;

            string content = File.ReadAllText(path);
            if (!Regex.IsMatch(content, @&quot;#CutsomClassName#&quot;)) return;

            content = ReplaceKeywords(content, path);
            File.WriteAllText(path, content);

            AssetDatabase.Refresh();
        }

        public static string ReplaceKeywords(string input, string filePath)
        {
            input = input.Replace(&quot;#FileName#&quot;, Path.GetFileName(filePath));
            input = input.Replace(&quot;#CompanyName#&quot;, CompanyName);
            input = input.Replace(&quot;#Author#&quot;, Author);
            input = input.Replace(&quot;#CreateTime#&quot;, DateTime.Now.ToString(&quot;F&quot;));
            input = input.Replace(&quot;#Version#&quot;, Version);
            input = input.Replace(&quot;#UnityVersion#&quot;, Application.unityVersion);
            input = input.Replace(&quot;#CutsomClassName#&quot;, Path.GetFileNameWithoutExtension(filePath));
            return input;
        } 
    }
}
&lt;/code&gt;&lt;/pre&gt;
</content:encoded></item></channel></rss>